(this.webpackJsonpstreamlit_component_template=this.webpackJsonpstreamlit_component_template||[]).push([[0],{487:function(e,t,n){},488:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=488},739:function(e,t,n){},741:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(59),c=n.n(i),s=n(137),o=n(23),l=n(11),d=n(441),u=n(839),h=n(845),j=function(e){return e.UNKNOWN="Unknown",e.BICYCLE="Bicycle",e.PEDESTRIAN="Pedestrian",e.LIGHT_VEHICLE="Light vehicle",e.HEAVY_VEHICLE="Heavy vehicle",e}({}),f=Object.values(j);function b(e){return Object.values(j).includes(e)}function g(e){switch(e){case j.UNKNOWN:return"green";case j.BICYCLE:return"purple";case j.PEDESTRIAN:return"red";case j.LIGHT_VEHICLE:return"cyan";case j.HEAVY_VEHICLE:return"pink"}}var m=n(49),x=n.n(m),O=n(198),p=n(50),v=n(13),y=n(7),k=n(8),w=n(4),F=n(5),C=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(w.a)(this,e),this._pos=void 0,this._pos=[t,n,a]}return Object(F.a)(e,[{key:"x",get:function(){return this._pos[0]},set:function(e){this._pos[0]=e}},{key:"y",get:function(){return this._pos[1]},set:function(e){this._pos[1]=e}},{key:"z",get:function(){return this._pos[2]},set:function(e){this._pos[2]=e}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}},{key:"distanceTo",value:function(e){return Math.sqrt(Math.pow(e.x-this.x,2)+Math.pow(e.y-this.y,2)+Math.pow(e.z-this.z,2))}}],[{key:"cross",value:function(t,n){return new e(t.y*n.z-t.z*n.y,t.z*n.x-t.x*n.z,t.x*n.y-t.y*n.x)}}]),e}(),M=function(e){Object(y.a)(n,e);var t=Object(k.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return Object(w.a)(this,n),(e=t.call(this,a,r,i))._angles=void 0,e._angles=[c,s,o],e}return Object(F.a)(n,[{key:"yaw",get:function(){return this._angles[0]},set:function(e){this._angles[0]=e}},{key:"pitch",get:function(){return this._angles[1]},set:function(e){this._angles[1]=e}},{key:"roll",get:function(){return this._angles[2]},set:function(e){this._angles[2]=e}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.yaw===e.yaw&&this.pitch===e.pitch&&this.roll===e.roll}}]),n}(C);n(487),n(40);function I(){var e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];return e[0][0]=1,e[1][1]=1,e[2][2]=1,e[3][3]=1,e}function L(e,t){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],a=0;a<4;a++)for(var r=0;r<4;r++)n[a][r]=e[a][0]*t[0][r]+e[a][1]*t[1][r]+e[a][2]*t[2][r]+e[a][3]*t[3][r];return n}function T(e,t){var n=new C;return n.x=e[0][0]*t.x+e[0][1]*t.y+e[0][2]*t.z+e[0][3],n.y=e[1][0]*t.x+e[1][1]*t.y+e[1][2]*t.z+e[1][3],n.z=e[2][0]*t.x+e[2][1]*t.y+e[2][2]*t.z+e[2][3],n}function E(e,t){var n=Math.cos(t),a=Math.sin(t),r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];return r[0][0]=1,r[1][1]=n,r[1][2]=-a,r[2][1]=a,r[2][2]=n,r[3][3]=1,L(r,e)}function N(e,t){var n=Math.cos(t),a=Math.sin(t),r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];return r[0][0]=n,r[0][2]=a,r[1][1]=1,r[2][0]=-a,r[2][2]=n,r[3][3]=1,L(r,e)}function S(e,t){var n=Math.cos(t),a=Math.sin(t),r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];return r[0][0]=n,r[0][1]=-a,r[1][0]=a,r[1][1]=n,r[2][2]=1,r[3][3]=1,L(r,e)}function W(e,t,n,a){return e=E(e=N(e=S(e,t),n),a)}function R(e,t,n,a){var r=JSON.parse(JSON.stringify(e));return r[0][0]+=e[3][0]*t,r[0][1]+=e[3][1]*t,r[0][2]+=e[3][2]*t,r[0][3]+=e[3][3]*t,r[1][0]+=e[3][0]*n,r[1][1]+=e[3][1]*n,r[1][2]+=e[3][2]*n,r[1][3]+=e[3][3]*n,r[2][0]+=e[3][0]*a,r[2][1]+=e[3][1]*a,r[2][2]+=e[3][2]*a,r[2][3]+=e[3][3]*a,r}function D(e,t,n,a){var r=JSON.parse(JSON.stringify(e));return r[0][0]*=t,r[0][1]*=t,r[0][2]*=t,r[0][3]*=t,r[1][0]*=n,r[1][1]*=n,r[1][2]*=n,r[1][3]*=n,r[2][0]*=a,r[2][1]*=a,r[2][2]*=a,r[2][3]*=a,r}function H(e,t,n,a){return[(a=T(_(e,t,n),a)).x,a.y]}function _(e,t,n){var a=I();return a=R(a,-e.pos.x,-e.pos.y,-e.pos.z),a=R(a=D(a=W(a,-e.pos.yaw,-e.pos.pitch,-e.pos.roll),t/e.width,n/e.height,1),.5*t-.5,.5*n-.5,0)}var B=n(2),z=function(e){var t=e.WIDTH,n=e.HEIGHT,r=e.scale,i=e.tracks,c=e.ground,s=e.showId,o=e.filters;return Object(B.jsx)("svg",{width:t,height:n,style:{transform:"scale(".concat(r,")"),transformOrigin:"top left",overflow:"visible"},children:Object(a.useMemo)((function(){return i.map((function(e){var a=g(e.type),r=H(c,t,n,e.startPos()),i=Object(l.a)(r,2),d=i[0],u=i[1],h=H(c,t,n,e.endPos()),j=Object(l.a)(h,2),f=j[0],b=j[1];return Object(B.jsxs)("g",{children:[Object(B.jsx)("path",{d:e.pathString(c,t,n,o.onlyConfirmed,o.markMeasurements,o.markEstimated),stroke:a||"black",fill:"none"}),Object(B.jsx)("circle",{cx:d,cy:u,r:4,fill:"green",strokeWidth:"4"}),Object(B.jsx)("circle",{cx:f,cy:b,r:4,fill:"red",strokeWidth:"4"}),s&&Object(B.jsx)("text",{x:f,y:b,fill:"white",fontFamily:"sans-serif",fontSize:10,children:e.id})]},e.id)}))}),[i,c,s,n,t,o])})},K=n(412),P=n.n(K),V=n(835),A=n(228),Y=n(853),U=n(854),G=n(836),q=n(841),J=function(e){var t=e.filters,n=e.onMarkMeasurements,a=e.onMarkEstimated,r=e.onMarkOnlyConfirmed,i=e.onMarkTrackId;return Object(B.jsx)(Y.a,{sx:{margin:0,marginLeft:2},component:"fieldset",variant:"standard",children:Object(B.jsxs)(U.a,{row:!0,children:[Object(B.jsxs)(U.a,{children:[Object(B.jsx)(G.a,{control:Object(B.jsx)(q.a,{checked:t.markMeasurements,onChange:n}),label:Object(B.jsx)(A.a,{fontSize:15,fontWeight:600,children:"Mark measurements"})}),Object(B.jsx)(G.a,{control:Object(B.jsx)(q.a,{checked:t.markEstimated,onChange:a}),label:Object(B.jsx)(A.a,{fontSize:15,fontWeight:600,children:"Mark estimated"})})]}),Object(B.jsxs)(U.a,{children:[Object(B.jsx)(G.a,{control:Object(B.jsx)(q.a,{checked:t.onlyConfirmed,onChange:r}),label:Object(B.jsx)(A.a,{fontSize:15,fontWeight:600,children:"Show only confirmed"})}),Object(B.jsx)(G.a,{control:Object(B.jsx)(q.a,{checked:t.trackId,onChange:i}),label:Object(B.jsx)(A.a,{fontSize:15,fontWeight:600,children:"Show track id"})})]})]})})},Q=n(855),X=n(856),Z=n(844),$=n(833),ee=n(860),te=n(821),ne=function(){function e(t,n,a,r,i,c,s){Object(w.a)(this,e),this.id=void 0,this.startTime=void 0,this.endTime=void 0,this.coordinates=void 0,this.speed=void 0,this.estimated=void 0,this.type=void 0,this.id=t,this.startTime=x()(n),this.endTime=x()(a),this.coordinates=r[0].map((function(e,t){return new C(e,r[1][t],0)})),this.speed=i,this.estimated=c.map((function(e){return 1===e})),this.type=function(e){switch(e){case 0:default:return j.UNKNOWN;case 1:return j.BICYCLE;case 4:return j.PEDESTRIAN;case 18:return j.LIGHT_VEHICLE;case 34:return j.HEAVY_VEHICLE}}(s)}return Object(F.a)(e,[{key:"getEstimated",value:function(){var e=this;return this.coordinates.filter((function(t,n){return e.estimated[n]}))}},{key:"getConfirmed",value:function(){var e=this;return this.coordinates.filter((function(t,n){return!e.estimated[n]}))}},{key:"toGround",value:function(e,t,n){return this.coordinates.map((function(a){return H(e,t,n,a)}))}},{key:"startPos",value:function(){return this.coordinates[0]}},{key:"endPos",value:function(){return this.coordinates[this.coordinates.length-1]}},{key:"length",value:function(){return this.startPos().distanceTo(this.endPos())}},{key:"pathString",value:function(e,t,n,a,r,i){var c=this,s=H(e,t,n,this.startPos()),o=Object(l.a)(s,2),d=o[0],u=o[1],h="M ".concat(d," ").concat(u," "),j=this.toGround(e,t,n);return j.forEach((function(e,t){var n=Object(l.a)(e,2),s=n[0],o=n[1],d=c.estimated[t];if((!a||!d)&&(h+="L ".concat(s," ").concat(o," "),0!==t&&(r&&!d||i&&d))){var u=d?3:6,f=Object(l.a)(j[t-1],2),b=f[0],g=f[1],m=Math.sqrt(Math.pow(b-s,2)+Math.pow(g-o,2)),x=0===m?1:m,O=[(o-g)/x,(b-s)/x],p=.707,v=O[0]*p-O[1]*p,y=O[0]*p+O[1]*p;h+="L ".concat(s+v*u," ").concat(o+y*u," L ").concat(s," ").concat(o," L ").concat(s-y*u," ").concat(o+v*u," L ").concat(s," ").concat(o," ")}})),h}}],[{key:"idCompare",value:function(e,t){return e.id-t.id}},{key:"lengthCompare",value:function(e,t){return e.length()-t.length()}},{key:"typeCompare",value:function(e,t){return f.indexOf(e.type)-f.indexOf(t.type)}},{key:"speedCompare",value:function(e,t){return e.speed-t.speed}}]),e}(),ae=n(843),re=n(810),ie=n(811),ce=n(812),se=function(e){var t=e.tracks,n=e.selectedTracks,a=e.onTrackSelect;return Object(B.jsxs)(B.Fragment,{children:[0!==t.length&&Object(B.jsxs)(ae.a,{children:[Object(B.jsx)(re.a,{sx:{visibility:"hidden"},children:Object(B.jsx)(q.a,{edge:"start",tabIndex:-1,disableRipple:!0})}),Object(B.jsx)(A.a,{fontWeight:500,sx:{width:"25%"},children:"Id"}),Object(B.jsx)(A.a,{fontWeight:500,sx:{width:"25%"},children:"Length"}),Object(B.jsx)(A.a,{fontWeight:500,sx:{width:"25%"},children:"Speed"}),Object(B.jsx)(A.a,{fontWeight:500,sx:{width:"25%"},children:"Type"})]}),t.map((function(e){return Object(B.jsxs)(ie.a,{onClick:function(t){return a(t,e)},children:[Object(B.jsx)(re.a,{children:Object(B.jsx)(q.a,{edge:"start",checked:n.has(e.id),tabIndex:-1,disableRipple:!0})}),Object(B.jsx)(ce.a,{style:{width:"25%"},primary:e.id}),Object(B.jsx)(ce.a,{style:{width:"25%"},primary:Math.round(1e4*(e.length()+Number.EPSILON))/1e4}),Object(B.jsx)(ce.a,{style:{width:"25%"},primary:Math.round(1e4*(e.speed+Number.EPSILON))/1e4}),Object(B.jsx)(ce.a,{style:{width:"25%"},primary:e.type})]},e.id)}))]})},oe=function(e){var t=e.width,n=e.tracks,r=e.switchLeftLabel,i=e.switchRightLabel,c=e.selectedTracks,s=e.onSwitch,o=e.onTrackSelect,d=["Id","Length","Speed","Type"],u=Object(a.useState)(d[0]),h=Object(l.a)(u,2),j=h[0],f=h[1];return Object(B.jsx)("div",{style:{marginTop:10,width:t},children:Object(B.jsxs)(Q.a,{sx:{bgcolor:"background.paper",position:"relative",overflow:"auto",borderRadius:1,maxHeight:"100%"},dense:!0,subheader:Object(B.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginRight:20,marginLeft:20,minHeight:60},children:[Object(B.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(B.jsx)(A.a,{fontWeight:600,children:r}),Object(B.jsx)(X.a,{onChange:s}),Object(B.jsx)(A.a,{fontWeight:600,children:i})]}),Object(B.jsxs)(Y.a,{children:[Object(B.jsx)(Z.a,{id:"demo-simple-select-label",children:Object(B.jsx)(A.a,{fontWeight:600,children:"Filter on"})}),Object(B.jsx)($.a,{sx:{height:40,width:100},labelId:"demo-simple-select-label",id:"demo-simple-select",value:j,label:Object(B.jsx)(A.a,{fontWeight:600,children:"Filter on"}),onChange:function(e){var t;t=e.target.value,d.includes(t)&&f(e.target.value)},children:d.map((function(e,t){return Object(B.jsx)(ee.a,{value:e,children:e},t)}))})]})]}),component:"nav","aria-label":"tracks list",children:[Object(B.jsx)(te.a,{sx:{borderBottomWidth:3}}),Object(B.jsx)(se,{tracks:function(e,t){return e.sort(function(e){switch(e){case"Id":default:return ne.idCompare;case"Length":return ne.lengthCompare;case"Type":return ne.typeCompare;case"Speed":return ne.speedCompare}}(t))}(n,j),selectedTracks:c,onTrackSelect:o})]})})},le=n(863),de=n(822),ue=n(823),he=n(208),je=n(68),fe=n(209),be=n(170),ge=n(143),me=function(e){var t=e.tracks,n=e.height,a=t.sort((function(e,t){return ne.typeCompare(e,t)})).reduce((function(e,t){var n=Math.round(t.length()),a=e.findIndex((function(e){return n===e.length&&e.type===t.type}));return-1!==a?e[a].nbr+=1:e.push({type:t.type,length:n,nbr:1}),e}),[]);return Object(B.jsx)(le.a,{height:n,children:Object(B.jsxs)(de.a,{data:a,margin:{top:0,right:5,left:-30,bottom:20},barSize:5,children:[Object(B.jsx)(ue.a,{}),Object(B.jsx)(he.a,{dataKey:"length",type:"number",domain:["dataMin","dataMax"],fontFamily:"sans-serif",children:Object(B.jsx)(je.a,{fontFamily:"sans-serif",value:"Length (m)",offset:-8,position:"insideBottom"})}),Object(B.jsx)(fe.a,{type:"number",domain:[0,"dataMax"],fontFamily:"sans-serif"}),Object(B.jsx)(be.a,{content:Object(B.jsx)(Oe,{})}),Object(B.jsx)(ge.a,{dataKey:"nbr",shape:Object(B.jsx)(xe,{})})]})})},xe=function(e){var t=e.x,n=e.y,a=e.width,r=e.height,i=e.type;return Object(B.jsx)("rect",{x:t,y:n,width:a,height:r,fill:g(i||j.UNKNOWN)})},Oe=function(e){var t=e.active,n=e.payload,a=e.label;return t&&n&&n.length?Object(B.jsxs)("div",{className:"custom-tooltip",style:{borderRadius:5,backgroundColor:"#1d1e25",borderColor:"#FFFFFF",paddingLeft:10,paddingRight:10,paddingTop:1,paddingBottom:1,border:"1px solid #FFF4F4"},children:[Object(B.jsx)("p",{className:"lengt-label",style:{fontFamily:"sans-serif"},children:"Length: ".concat(a)}),Object(B.jsx)("p",{className:"nbr-label",style:{fontFamily:"sans-serif"},children:"Tracks: ".concat(n[0].value)})]}):null},pe=n(847),ve=n(431),ye=n(144),ke=function(e){var t=e.tracks,n=e.height,a=t.reduce((function(e,t){var n=e.findIndex((function(e){return e.type===t.type}));return e[n].occurences++,e}),Object.values(j).map((function(e){return{type:e,occurences:0}})));return Object(B.jsxs)("div",{children:[Object(B.jsx)(le.a,{height:n,children:Object(B.jsx)(pe.a,{children:Object(B.jsx)(ve.a,{data:a,dataKey:"occurences",nameKey:"type",label:we,labelLine:!1,children:a.map((function(e,t){return Object(B.jsx)(ye.a,{fill:g(e.type)},"cell-".concat(t))}))})})}),Object(B.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center"},children:Object.values(j).map((function(e){return 0===a[a.findIndex((function(t){return t.type===e}))].occurences?null:Fe(e,g(e))}))})]})},we=function(e){var t=e.occurences,n=e.cx,a=e.cy,r=e.innerRadius,i=e.outerRadius,c=e.midAngle,s=e.percent,o=Math.PI/180,l=r+.5*(i-r),d=n+l*Math.cos(-c*o),u=a+l*Math.sin(-c*o);return 0!==t?Object(B.jsx)("text",{x:d,y:u,fill:"white",textAnchor:"center",dominantBaseline:"central",style:{fontFamily:"sans-serif",color:"#FFFFFF"},children:"".concat((100*s).toFixed(0),"%")}):null},Fe=function(e,t){return Object(B.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",margin:5},children:[Object(B.jsx)("div",{style:{backgroundColor:t,marginRight:3,width:10,height:10,border:"1px solid #FFFFFF"}}),Object(B.jsx)("text",{style:{fontFamily:"sans-serif",color:"#FFFFFF"},children:e})]},e)},Ce=n(276),Me=n.n(Ce),Ie=(n(739),function(e){var t=e.open,n=e.collapsibleClassName,r=void 0===n?"collapsible-card":n,i=e.headerClassName,c=void 0===i?"collapsible-header":i,s=e.titleClassName,o=void 0===s?"title-text":s,d=e.contentClassName,u=void 0===d?"collapsible-content":d,h=e.contentContainerClassName,j=void 0===h?"collapsible-content-padding":h,f=e.children,b=e.header,g=Object(a.useState)(t),m=Object(l.a)(g,2),x=m[0],O=m[1],p=Object(a.useState)(t?void 0:0),v=Object(l.a)(p,2),y=v[0],k=v[1],w=Object(a.useRef)(null);return Object(a.useEffect)((function(){if(y&&x&&w.current){var e=new ResizeObserver((function(e){k(e[0].contentRect.height)}));return e.observe(w.current),function(){e.disconnect()}}}),[y,x]),Object(a.useEffect)((function(){var e;k(x?null===(e=w.current)||void 0===e?void 0:e.getBoundingClientRect().height:0)}),[x]),Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)("div",{className:r,style:{borderRadius:5},children:[Object(B.jsxs)("div",{className:c,onClick:function(){O((function(e){return!e}))},style:{borderRadius:5},children:[Object(B.jsx)("div",{className:o,children:b}),x?Object(B.jsx)(Me.a,{sx:{transform:"rotate(180deg)",transitionDuration:0}}):Object(B.jsx)(Me.a,{})]}),Object(B.jsx)("div",{className:u,style:{height:y},children:Object(B.jsx)("div",{ref:w,children:Object(B.jsx)("div",{className:j,children:f})})})]})})}),Le=n(851),Te=n(435);function Ee(e){var t=e.length;if(t%2===0){var n=t/2;return(e[n-1]+e[n])/2}return e[Math.floor(t/2)]}var Ne=function(e){var t=e.x,n=e.y,a=e.width,r=e.height;return null==t||null==n||null==a||null==r?null:Object(B.jsx)("line",{x1:t,y1:n,x2:t+a,y2:n,stroke:"#000",strokeWidth:5})},Se=function(e){var t=e.x,n=e.y,a=e.width,r=e.height;return null==t||null==n||null==a||null==r?null:Object(B.jsx)("line",{x1:t+a/2,y1:n+r,x2:t+a/2,y2:n,stroke:"#000",strokeWidth:5,"stroke-dasharray":"5"})},We=function(e){return e[e.WHISKER=0]="WHISKER",e[e.BOX=1]="BOX",e[e.MEDIAN=2]="MEDIAN",e}(We||{}),Re=function(e){var t=e.tracks,n=e.height,r=Object(a.useState)(We.MEDIAN),i=Object(l.a)(r,2),c=i[0],s=i[1],d=function(e){var t=Object.values(j).map((function(e){return{type:e,speeds:[]}}));return e.forEach((function(e){var n=t.findIndex((function(t){return t.type===e.type}));t[n].speeds.push(e.speed)})),t.filter((function(e){return 0!==e.speeds.length})).map((function(e){if(1==e.speeds.length)return{type:e.type,min:0,bottomWhisker:0,bottomBox:0,topBox:0,topWhisker:0,max:0,average:e.speeds[0],median:e.speeds[0],upperQuartile:0,lowerQuartile:0,lowerEnd:0,upperEnd:0};var t=e.speeds.sort((function(e,t){return e-t})),n=t.length,a=t[0],r=t[n-1],i=t[Math.floor(n/2)],c=t.reduce((function(e,t){return e+t}),0)/n,s=t.slice(0,Math.floor(n/2)),o=t.slice(Math.ceil(n/2)),l=Ee(s),d=Ee(o),u=d-l,h=l-1.5*u,j=d+1.5*u;return{type:e.type,min:a,bottomWhisker:l-h,bottomBox:i-l,topBox:d-i,topWhisker:j-d,median:i,average:c,max:r,upperQuartile:d,lowerQuartile:l,lowerEnd:h,upperEnd:j}}))}(t),u=function(){s(We.MEDIAN)},h=function(){s(We.BOX)},f=function(){s(We.WHISKER)};return Object(B.jsx)(le.a,{height:n,children:Object(B.jsxs)(Le.a,{margin:{top:0,right:5,left:-30,bottom:20},data:d,children:[Object(B.jsx)(ue.a,{vertical:!1}),Object(B.jsx)(ge.a,{stackId:"a",dataKey:"lowerEnd",fill:"none"}),Object(B.jsx)(ge.a,{stackId:"a",dataKey:"bar",onMouseOver:f,shape:Object(B.jsx)(Ne,{})}),Object(B.jsx)(ge.a,{stackId:"a",dataKey:"bottomWhisker",onMouseOver:f,shape:Object(B.jsx)(Se,{})}),Object(B.jsx)(ge.a,{stackId:"a",dataKey:"bottomBox",onMouseOver:h,children:d.map((function(e,t){return Object(B.jsx)(ye.a,{fill:g(d[t].type)})}))}),Object(B.jsx)(ge.a,{stackId:"a",onMouseOver:u,dataKey:"bar",shape:Object(B.jsx)(Ne,{})}),Object(B.jsx)(ge.a,{stackId:"a",dataKey:"topBox",onMouseOver:h,children:d.map((function(e,t){return Object(B.jsx)(ye.a,{fill:g(d[t].type)})}))}),Object(B.jsx)(ge.a,{stackId:"a",dataKey:"topWhisker",onMouseOver:f,shape:Object(B.jsx)(Se,{})}),Object(B.jsx)(ge.a,{stackId:"a",dataKey:"bar",onMouseOver:f,shape:Object(B.jsx)(Ne,{})}),Object(B.jsx)(Te.a,{dataKey:"average",onMouseOver:u,fill:"white",stroke:"#FFF"}),Object(B.jsx)(he.a,{dataKey:"type",fontFamily:"sans-serif"}),Object(B.jsx)(fe.a,{fontFamily:"sans-serif"}),Object(B.jsx)(be.a,{content:function(e){switch(c){case We.BOX:return Be(Object(o.a)({data:d},e));case We.MEDIAN:return He(Object(o.a)({data:d},e));case We.WHISKER:return _e(Object(o.a)({data:d},e))}}})]})})},De=function(e){var t=e.active,n=e.payload,a=e.label,r=e.data;return t&&n&&n.length?Object(B.jsx)("div",{className:"custom-tooltip",style:{borderRadius:5,backgroundColor:"#1d1e25",borderColor:"#FFFFFF",paddingLeft:10,paddingRight:10,paddingTop:1,paddingBottom:1,border:"1px solid #FFF4F4"},children:r[r.findIndex((function(e){return e.type===a}))].info.map((function(e){return Object(B.jsx)("p",{className:"lengt-label",style:{fontFamily:"sans-serif"},children:e})}))}):null},He=function(e){var t=e.active,n=e.payload,a=e.label,r=e.data;return Object(B.jsx)(De,{active:t,payload:n,label:a,data:r.map((function(e){return{type:e.type,info:["Median: ".concat(Math.round(100*e.median)/100),"Average: ".concat(Math.round(100*e.average)/100)]}}))})},_e=function(e){var t=e.active,n=e.payload,a=e.label,r=e.data;return Object(B.jsx)(De,{active:t,payload:n,label:a,data:r.map((function(e){return{type:e.type,info:["Upper end: ".concat(Math.round(100*e.upperEnd)/100),"Lower end: ".concat(Math.round(100*e.lowerEnd)/100)]}}))})},Be=function(e){var t=e.active,n=e.payload,a=e.label,r=e.data;return Object(B.jsx)(De,{active:t,payload:n,label:a,data:r.map((function(e){return{type:e.type,info:["Upper quartile: ".concat(Math.round(100*e.upperQuartile)/100),"Lower quartile: ".concat(Math.round(100*e.lowerQuartile)/100)]}}))})},ze=function(e){var t=e.tracks,n=e.height;return Object(B.jsxs)(Ie,{header:"Show diagrams",children:[Object(B.jsx)("h5",{style:{fontFamily:"sans-serif",color:"#FFFFFF",marginTop:0},children:"Length histogram"}),Object(B.jsx)(me,{height:.4*n,tracks:t}),Object(B.jsx)("h5",{style:{fontFamily:"sans-serif",color:"#FFFFFF",marginTop:0},children:"Speed box plot"}),Object(B.jsx)(Re,{height:.6*n,tracks:t}),Object(B.jsx)("h5",{style:{fontFamily:"sans-serif",color:"#FFFFFF",marginTop:0},children:"Type distribution"}),Object(B.jsx)(ke,{height:.3*n,tracks:t})]})},Ke=function(e){var t=e.label,n=e.plotterWidth,r=e.image,i=e.imageWidth,c=e.imageHeight,s=e.tracks,d=e.ground,u=Object(a.useState)(Math.round(100*(n/i+Number.EPSILON))/100),j=Object(l.a)(u,2),f=j[0],b=j[1],g=c*Math.round(100*(n/i+Number.EPSILON))/100,m=Object(a.useState)({markMeasurements:!1,markEstimated:!1,onlyConfirmed:!1,trackId:!1,showLines:!1,filterSelected:!1}),x=Object(l.a)(m,2),O=x[0],p=x[1],y=Object(a.useState)(new Set),k=Object(l.a)(y,2),w=k[0],F=k[1],C=Object(a.useState)(!0),M=Object(l.a)(C,2),I=M[0],L=M[1],T=function(){return s.filter((function(e){return O.filterSelected===w.has(e.id)}))};return Object(B.jsxs)("div",{style:{width:n},children:[Object(B.jsxs)("div",{children:[Object(B.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:10},children:[Object(B.jsxs)(h.a,{onClick:function(){return L((function(e){return!e}))},sx:{marginRight:1},variant:"text",children:["Version ",t]}),I&&Object(B.jsx)(V.a,{value:f,"aria-label":"Default",valueLabelDisplay:"auto",onChange:function(e,t){"number"===typeof t&&b(t)},min:0,max:4,step:.01,color:"primary",className:"slider",style:{margin:0,width:"66%"}})]}),I&&Object(B.jsx)(J,{filters:O,onMarkMeasurements:function(e){p((function(t){return Object(o.a)(Object(o.a)({},t),{},{markMeasurements:e.target.checked})}))},onMarkEstimated:function(e){p((function(t){return Object(o.a)(Object(o.a)({},t),{},{markEstimated:e.target.checked})}))},onMarkOnlyConfirmed:function(e){p((function(t){return Object(o.a)(Object(o.a)({},t),{},{onlyConfirmed:e.target.checked})}))},onMarkTrackId:function(e){p((function(t){return Object(o.a)(Object(o.a)({},t),{},{trackId:e.target.checked})}))}})]}),Object(B.jsx)("div",{style:{overflow:"hidden",height:c*f,maxHeight:g},children:Object(B.jsx)(P.a,{children:Object(B.jsx)("div",{className:"image-container",style:{width:i*f,height:c*f,backgroundImage:"url(".concat(r,")")},children:Object(B.jsx)(z,{tracks:T(),WIDTH:i,HEIGHT:c,scale:f,showId:O.trackId,ground:d,filters:O})})})}),Object(B.jsxs)("div",{style:{display:"flex",flexDirection:"row",height:.8*g},children:[Object(B.jsx)(oe,{width:.66*n,tracks:Object(v.a)(s),switchLeftLabel:"Hide",switchRightLabel:"Show",selectedTracks:w,onSwitch:function(e){p((function(t){return Object(o.a)(Object(o.a)({},t),{},{filterSelected:e.target.checked})}))},onTrackSelect:function(e,t){w.has(t.id)?F((function(e){return e.delete(t.id),new Set(e)})):F((function(e){return e.add(t.id),new Set(e)}))}}),Object(B.jsxs)("div",{style:{marginLeft:10,marginTop:10,width:.33*n},children:[Object(B.jsxs)(A.a,{fontWeight:600,sx:{marginBottom:1},children:["Number of tracks: ",s.length]}),0!==s.length?Object(B.jsx)(ze,{height:700,tracks:T()}):null]})]})]})},Pe=function(e){var t=e.fromTime,n=e.toTime,a=e.showType,r=e.showVersions,i=e.filterLength,c=Object(s.useRenderData)(),o=c.args.images,l=c.args.shapes,d=c.args.grounds,u=c.args.names,h=d.map((function(e){return{pos:Object(p.a)(M,Object(v.a)(e[0])),height:e[1],width:e[2]}})),j=c.args.tracks,f=j.map((function(e){return e.map((function(e){return Object(p.a)(ne,Object(v.a)(e))})).filter((function(e){return function(e,t,n,a,r){return!e.startTime.isBefore(t)&&!e.endTime.isAfter(n)&&!!a.includes(e.type)&&(!r.filter||!(e.length()<r.minLength||e.length()>r.maxLength))}(e,t,n,a,i)}))})),b=r.length<=1?1:r.length%3===0?3:r.length%2===0?2:3;return Object(B.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:[f.map((function(e,t){return-1===r.indexOf(u[t])?null:Object(B.jsx)("div",{style:{margin:5},children:Object(B.jsx)(Ke,{image:o[t],plotterWidth:(window.innerWidth-20*b)/b,imageHeight:l[t][0],imageWidth:l[t][1],tracks:e,label:u[t],ground:h[t]},o[t])})})),Object(B.jsx)("div",{style:{height:1e4}})]})},Ve=n(846),Ae=n(436),Ye=n(831),Ue=n(832),Ge=n(825),qe=function(e){var t=e.data,n=e.changeDate,a=e.changeTime,r=e.changeInterval;return Object(B.jsxs)(Ae.a,{dateAdapter:Ge.a,children:[Object(B.jsx)(Ye.a,{label:Object(B.jsx)(A.a,{fontWeight:600,children:"Date"}),format:"YYYY-MM-DD",value:t.date,onChange:n,sx:{backgroundColor:"background.default",borderRadius:1,marginRight:2,width:200}}),Object(B.jsx)(Ue.a,{label:Object(B.jsx)(A.a,{fontWeight:600,children:"From time"}),value:t.fromTime,onChange:a,ampm:!1,sx:{backgroundColor:"background.default",borderRadius:1,marginRight:2,width:200}}),Object(B.jsx)(Ve.a,{label:Object(B.jsx)(A.a,{fontWeight:600,children:"Interval in minutes"}),id:"outlined-start-adornment",sx:{width:200,backgroundColor:"background.default",borderRadius:1,margin:0},value:t.interval,onChange:r})]})},Je=function(e){var t=e.data,n=e.checkFilterBox,a=e.changeMinLength,r=e.changeMaxLength;return Object(B.jsxs)("div",{children:[Object(B.jsx)(G.a,{control:Object(B.jsx)(q.a,{checked:t.filterLength.filter,onChange:n}),label:Object(B.jsx)(A.a,{fontWeight:600,children:"Filter length"}),style:{margin:0,marginTop:10,fontWeight:500}}),t.filterLength.filter&&Object(B.jsxs)("div",{style:{marginTop:10},children:[Object(B.jsx)(Ve.a,{label:Object(B.jsx)(A.a,{fontWeight:600,children:"Min length"}),id:"outlined-start-adornment",sx:{m:1,width:"25ch",backgroundColor:"background.default",borderRadius:1,margin:0,marginRight:2},value:t.filterLength.minLength,onChange:a}),Object(B.jsx)(Ve.a,{label:Object(B.jsx)(A.a,{fontWeight:600,children:"Max length"}),id:"outlined-start-adornment",sx:{m:1,width:"25ch",backgroundColor:"background.default",borderRadius:1,margin:0,marginRight:2},value:t.filterLength.maxLength,onChange:r})]})]})},Qe=n(848),Xe=function(e){var t=e.title,n=e.value,a=e.labels,r=e.checked,i=e.handleChange,c={PaperProps:{style:{maxHeight:224,width:250}}};return Object(B.jsxs)(Y.a,{sx:{m:1,width:300,margin:0,marginLeft:2},children:[Object(B.jsx)(Z.a,{id:"demo-multiple-name-label",children:Object(B.jsx)(A.a,{fontWeight:600,children:t})}),Object(B.jsx)($.a,{labelId:"demo-multiple-name-label",id:"demo-multiple-name",multiple:!0,value:n,onChange:i,input:Object(B.jsx)(Qe.a,{label:t}),renderValue:function(e){return e.join(", ")},MenuProps:c,sx:{backgroundColor:"background.default"},children:a.map((function(e,t){return Object(B.jsxs)(ee.a,{value:e,children:[Object(B.jsx)(q.a,{checked:r(e)}),Object(B.jsx)(ce.a,{primary:e})]},t)}))})]})},Ze=function(){var e=Object(s.useRenderData)(),t=e.args.names,n=x()(e.args.date),r={date:n,fromTime:n,interval:0,showType:Object.values(j),showVersions:t,filterLength:{filter:!1,minLength:0,maxLength:100}},i=Object(a.useState)(r),c=Object(l.a)(i,2),f=c[0],g=c[1],m=e.theme,p=Object(d.a)({palette:{primary:{main:null===m||void 0===m?void 0:m.primaryColor},common:{black:null===m||void 0===m?void 0:m.base},text:{primary:null===m||void 0===m?void 0:m.textColor,secondary:null===m||void 0===m?void 0:m.textColor},action:{active:"#fff"},background:{default:null===m||void 0===m?void 0:m.secondaryBackgroundColor,paper:null===m||void 0===m?void 0:m.secondaryBackgroundColor}}});Object(a.useEffect)((function(){f.date.isValid()&&O.Streamlit.setComponentValue(f.date.format("YYYY-MM-DD"))}),[f.date]);return Object(B.jsx)(u.a,{theme:p,children:Object(B.jsxs)("div",{style:{marginTop:30},children:[Object(B.jsx)(qe,{data:f,changeDate:function(e){x.a.isDayjs(e)&&g((function(t){return t.date=e,Object(o.a)({},t)}))},changeTime:function(e){x.a.isDayjs(e)&&g((function(t){return t.fromTime=e,Object(o.a)({},t)}))},changeInterval:function(e){var t=Number(e.target.value);isNaN(t)||g((function(e){return e.interval=t,Object(o.a)({},e)}))}}),Object(B.jsx)(Xe,{title:"Show versions",value:f.showVersions,labels:t,checked:function(e){return-1!==f.showVersions.indexOf(e)},handleChange:function(e){var n=e.target.value;g((function(e){return e.showVersions="string"===typeof n?n.split(""):n.sort((function(e,n){return t.indexOf(e)-t.indexOf(n)})),Object(o.a)({},e)}))}}),Object(B.jsx)(Xe,{title:"Show types",value:f.showType,labels:Object.values(j),checked:function(e){return b(e)&&-1!==f.showType.indexOf(e)},handleChange:function(e){var t=e.target.value;g((function(e){return e.showType="string"===typeof t?function(e){return b(e)?[e]:[]}(t):t,Object(o.a)({},e)}))}}),Object(B.jsx)(Je,{data:f,checkFilterBox:function(e){g((function(t){return t.filterLength.filter=e.target.checked,Object(o.a)({},t)}))},changeMinLength:function(e){var t=Number(e.target.value);isNaN(t)||g((function(e){return e.filterLength.minLength=t,Object(o.a)({},e)}))},changeMaxLength:function(e){var t=Number(e.target.value);isNaN(t)||g((function(e){return e.filterLength.maxLength=t,Object(o.a)({},e)}))}}),Object(B.jsxs)("div",{style:{margin:0,marginTop:10},children:[Object(B.jsx)(h.a,{sx:{marginRight:2,backgroundColor:"background.default"},onClick:function(){g((function(e){return e.fromTime=e.fromTime.subtract(e.interval,"minutes"),Object(o.a)({},e)}))},children:"<"}),Object(B.jsx)(h.a,{sx:{marginRight:2,backgroundColor:"background.default"},onClick:function(){g((function(e){return e.fromTime=e.fromTime.add(e.interval,"minutes"),Object(o.a)({},e)}))},children:">"})]}),Object(B.jsx)(Pe,{fromTime:f.fromTime,toTime:f.fromTime.add(f.interval,"minutes"),showType:f.showType,showVersions:f.showVersions,filterLength:f.filterLength})]})})};console.warn=function(){},c.a.render(Object(B.jsx)(r.a.StrictMode,{children:Object(B.jsx)(s.StreamlitProvider,{children:Object(B.jsx)(Ze,{})})}),document.getElementById("root"))}},[[741,1,2]]]);
//# sourceMappingURL=main.e1bac236.chunk.js.map