(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[921],{82193:function(e,n,t){"use strict";t.r(n),t.d(n,{RunRoot:function(){return oe},default:function(){return ue}});var r,i=t(71171),o=t(90239),u=t(31623),a=t(47515),s=t(20356),c=t(83473),l=t(57103),f=t(95714),d=t(73070),p=t(67445),h=t(78193),m=t(50032),x=t(88949),v=t(74894),g=t(20822),y=t(67099),j=t(24265),w=t(46856),S=t(92761),I=t(66708),b=t(80500),T=t(74492),F=t(68079),A=t(33028),R=t(96234),k=t(60319),O=t(17868),E=t(84464),K=t(80005),L=t(62709),N=t(92014),_=t(99641),C=t(92764),Z=t(23555),q=t(46860),V=t(75418),Q=t(68365),U=t(33657),D=t(26390),P=t(20317),z=t(90039),J=t(86252),M=t(70037),W=t(90986),G=t(41084),B=t(75731),X=t(50466),$=t(35936),H=function(e){var n,t=e.run,r=e.runId,i=(0,X.Bz)(),o=(0,R.Z)(i,2),u=o[0],a=o[1],s=(0,q.q)({queryKey:"selection",defaults:{selection:""}}),c=(0,R.Z)(s,2),l=c[0],f=c[1];n=t?function(e){switch(e){case Z.VOA.FAILURE:return"/favicon-run-failed.svg";case Z.VOA.SUCCESS:return"/favicon-run-success.svg";case Z.VOA.STARTING:case Z.VOA.STARTED:case Z.VOA.CANCELING:return"/favicon-run-pending.svg";default:return"/favicon.svg"}}(t.status):"/favicon.svg",h.useEffect((function(){var e=document.querySelector('link[rel="icon"][type="image/svg+xml"]');if(e){var t=e.getAttribute("href");return e.setAttribute("href",n),function(){t&&e.setAttribute("href",t)}}}),[n]),(0,y.j)(t?"".concat((0,g.pv)(t.pipelineName)?"":t.pipelineName," ").concat(r.slice(0,8)," [").concat(t.status,"]"):"Run: ".concat(r));var d=function(e,n){var t=n.find((function(n){return"ExecutionStepFailureEvent"===n.__typename&&n.stepKey===e}));t&&(0,K._)({body:(0,$.jsx)(N.T9,{error:t})})},p=function(e){f(e),a((0,A.Z)((0,A.Z)({},u),{},{logQuery:"*"!==e?[{token:"query",value:e}]:[]}))};return(0,$.jsx)(M.A.Provider,{value:t,children:(0,$.jsx)(D.C,{runId:r,children:function(e){return(0,$.jsx)(W.jp,{logs:e,children:function(n){return(0,$.jsx)(Y,{run:t,runId:r,logs:e,logsFilter:u,metadata:n,selectionQuery:l,onSetLogsFilter:a,onSetSelectionQuery:p,onShowStateDetails:d})}})}},r)})},Y=function(e){var n=e.run,t=e.runId,r=e.logs,i=e.logsFilter,o=e.metadata,u=e.selectionQuery,s=e.onSetLogsFilter,c=e.onSetSelectionQuery,l=(0,B.W)(n),f=h.createRef(),d=(0,q.q)({queryKey:"logType",defaults:{logType:"structured"}}),m=(0,R.Z)(d,2),x=m[0],v=m[1],g=function(e){switch(e){case"stdout":return z.hi.stdout;case"stderr":return z.hi.stderr;default:return z.hi.structured}}(x),y=h.useState(null),j=(0,R.Z)(y,2),w=j[0],S=j[1],I=JSON.stringify(Object.keys(o.steps).sort()),b=h.useMemo((function(){return JSON.parse(I)}),[I]),T=(null===n||void 0===n?void 0:n.executionPlan)&&(0,C.J)(null===n||void 0===n?void 0:n.executionPlan,o.steps),A=h.useMemo((function(){return T&&u&&"*"!==u?(0,L.V)(T,u).all.map((function(e){return e.name})):[]}),[T,u]),k=(0,V.a)(),K=(0,G.r)({stepKeys:b,selectionStepKeys:A,metadata:o}),N=K.logCaptureInfo,Z=K.computeLogFileKey,D=K.setComputeLogFileKey,M=T?i.logQuery.filter((function(e){return e.token&&"query"===e.token})).reduce((function(e,n){return[].concat((0,F.Z)(e),(0,F.Z)((0,L.V)(T,n.value).all.map((function(e){return e.name}))))}),[]):[],W=function(e,n){var t,r=A.indexOf(e),i='"'.concat(e,'"');if(n.shiftKey)t=(0,F.Z)(A.map((function(e){return u.includes('"'.concat(e,'"'))?'"'.concat(e,'"'):e}))),-1!==r?t.splice(r,1):t.push(i);else if(1===A.length&&-1!==r)t=[];else{t=[i];var a=(0,G.c)(o.logCaptureSteps,e);a&&D(a)}c(t.join(", ")||"*")};return(0,$.jsx)($.Fragment,{children:(0,$.jsx)(E.OS,{ref:f,axis:"vertical",identifier:"run-gantt",firstInitialPercent:35,firstMinSize:56,first:function(e){return n?"QUEUED"===n.status?(0,$.jsx)(_.Fu,{run:n}):n.executionPlan&&T?(0,$.jsx)(O.S,{region:"gantt chart",children:(0,$.jsx)(_.hj,{options:{mode:_.hS.WATERFALL_TIMED},toolbarActions:(0,$.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,$.jsx)(E.jo,{axis:"vertical",container:f}),(0,$.jsx)(J.NX,{run:n,onLaunch:l,graph:T,metadata:e,selection:{query:u,keys:A}})]}),runId:t,graph:T,metadata:e,selection:{query:u,keys:A},onClickStep:W,onSetSelection:c,focusedTime:i.focusedTime})}):(0,$.jsx)(p.t,{icon:"error",title:"Unable to build execution plan"}):(0,$.jsx)(_.ZW,{runId:t})}(o),second:(0,$.jsx)(O.S,{region:"logs",children:(0,$.jsxs)(ee,{children:[(0,$.jsx)(z.KZ,{logType:g,onSetLogType:function(e){return v(z.hi[e])},filter:i,onSetFilter:s,steps:b,metadata:o,computeLogFileKey:Z,onSetComputeLogKey:D,computeLogUrl:w,counts:r.counts}),g!==z.hi.structured?k?(0,$.jsx)(Q.h,{logKey:Z?[t,"compute_logs",Z]:[],logCaptureInfo:N,visibleIOType:z.hi[g],onSetDownloadUrl:S}):(0,$.jsx)(U.K,{runId:t,computeLogFileKey:b.length?Z:void 0,ioType:z.hi[g],setComputeLogUrl:S}):(0,$.jsx)(P.S,{logs:r,filter:i,filterStepKeys:M,filterKey:"".concat(JSON.stringify(i)),metadata:o})]})})})})},ee=k.ZP.div.withConfig({displayName:"Run__LogsContainer",componentId:"sc-1l2e0ac-0"})(["display:flex;flex-direction:column;height:100%;"]),ne=t(24138),te=t(42236),re=t(25465),ie=t(89622),oe=function(){(0,v.Px)();var e=(0,m.UO)().runId;(0,y.j)(e?"Run ".concat(e.slice(0,8)):"Run");var n=(0,o.a)(se,{variables:{runId:e}}),t=n.data,r=n.loading,i="Run"===(null===t||void 0===t?void 0:t.pipelineRunOrError.__typename)?t.pipelineRunOrError:null,u=null===i||void 0===i?void 0:i.pipelineSnapshotId,p=(0,b.n)(i),F=null!==p&&void 0!==p&&p.match?(0,I.kQ)(p.match.repository.name,p.match.repositoryLocation.name):null,A=h.useMemo((function(){return!!(i&&p&&(0,S.E8)(p.match,i.pipelineName))}),[i,p]);return(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%",overflow:"hidden"},children:[(0,$.jsx)(a.x,{flex:{direction:"row",alignItems:"flex-start"},style:{position:"relative",zIndex:1},children:(0,$.jsx)(s.m,{title:(0,$.jsx)(c.X6,{style:{fontFamily:l.b.monospace,fontSize:"20px"},children:e.slice(0,8)}),tags:i?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(re.KG,{status:i.status}),(0,g.pv)(i.pipelineName)?(0,$.jsx)(T.m,{assetKeys:(0,ie.Bo)(i),useTags:!0}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(f.V,{icon:"run",children:["Run of"," ",(0,$.jsx)(j.h,{pipelineName:null===i||void 0===i?void 0:i.pipelineName,pipelineHrefContext:F||"repo-unknown",snapshotId:u,size:"small",isJob:A})]}),(0,$.jsx)(T.m,{assetKeys:i.assets.map((function(e){return e.key})),useTags:!0})]}),(0,$.jsxs)(a.x,{flex:{direction:"row",alignItems:"flex-start",gap:12,wrap:"wrap"},children:[null!==i&&void 0!==i&&i.startTime?(0,$.jsx)(d.J,{interactionKind:"hover",placement:"bottom",content:(0,$.jsx)(a.x,{padding:16,children:(0,$.jsx)(ne.lc,{run:i,loading:r})}),children:(0,$.jsx)(f.V,{icon:"schedule",children:(0,$.jsx)(w.v,{timestamp:i.startTime,timeFormat:{showSeconds:!0,showTimezone:!1}})})}):i.updateTime?(0,$.jsx)(f.V,{icon:"schedule",children:(0,$.jsx)(w.v,{timestamp:i.updateTime,timeFormat:{showSeconds:!0,showTimezone:!1}})}):void 0,null!==i&&void 0!==i&&i.startTime&&null!==i&&void 0!==i&&i.endTime?(0,$.jsx)(d.J,{interactionKind:"hover",placement:"bottom",content:(0,$.jsx)(a.x,{padding:16,children:(0,$.jsx)(ne.lc,{run:i,loading:r})}),children:(0,$.jsx)(f.V,{icon:"timer",children:(0,$.jsx)("span",{style:{fontVariantNumeric:"tabular-nums"},children:null!==i&&void 0!==i&&i.startTime?(0,x.fv)((1e3*(null===i||void 0===i?void 0:i.endTime)||Date.now())-1e3*(null===i||void 0===i?void 0:i.startTime)):"\u2013"})})}):null]})]}):null,right:i?(0,$.jsx)(ne.Up,{run:i,isJob:A}):null})}),(0,$.jsx)(ae,{data:t,runId:e})]})},ue=oe,ae=function(e){var n=e.data,t=e.runId;return n&&n.pipelineRunOrError?"Run"!==n.pipelineRunOrError.__typename?(0,$.jsx)(a.x,{padding:{vertical:64},children:(0,$.jsx)(p.t,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})}):(0,$.jsx)(H,{run:n.pipelineRunOrError,runId:t}):(0,$.jsx)(H,{run:void 0,runId:t})},se=(0,u.Ps)(r||(r=(0,i.Z)(["\n  query RunRootQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        ...RunPageFragment\n      }\n    }\n  }\n\n  ","\n"])),te.tQ)},75731:function(e,n,t){"use strict";t.d(n,{W:function(){return d}});var r=t(32723),i=t(34795),o=t(96234),u=t(15541),a=t(78193),s=t(50032),c=t(93809),l=t(80500),f=t(89622),d=function(e){var n=(0,s.k6)(),t=(0,u.D)(f.kO),d=(0,o.Z)(t,1)[0],p=(0,l.n)(e);return a.useCallback(function(){var t=(0,i.Z)((0,r.Z)().mark((function t(i){var o,u,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.pipelineSnapshotId&&p){t.next=2;break}return t.abrupt("return");case 2:return o=(0,f.kz)({run:e,style:i,repositoryLocationName:p.match.repositoryLocation.name,repositoryName:p.match.repository.name}),t.prev=3,t.next=6,d({variables:o});case 6:a=t.sent,(0,f.lF)(e.pipelineName,null===(u=a.data)||void 0===u?void 0:u.launchPipelineReexecution,n,{preserveQuerystring:!0,behavior:"open"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),(0,c.t)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),[n,d,p,e])}},48652:function(e,n,t){var r=t(39865),i={ease:r(.25,.1,.25,1),easeIn:r(.42,0,1,1),easeOut:r(0,0,.58,1),easeInOut:r(.42,0,.58,1),linear:r(0,0,1,1)};function o(){}function u(){var e=new Set,n=new Set,t=0;return{next:r,cancel:r,clearAll:function(){e.clear(),n.clear(),cancelAnimationFrame(t),t=0}};function r(e){n.add(e),t||(t=requestAnimationFrame(i))}function i(){t=0;var r=n;n=e,(e=r).forEach((function(e){e()})),e.clear()}}e.exports=function(e,n,t){var r=Object.create(null),u=Object.create(null),a="function"===typeof(t=t||{}).easing?t.easing:i[t.easing];a||(t.easing&&console.warn("Unknown easing function in amator: "+t.easing),a=i.ease);var s="function"===typeof t.step?t.step:o,c="function"===typeof t.done?t.done:o,l=function(e){if(!e){return"undefined"!==typeof window&&window.requestAnimationFrame?{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}:{next:function(e){return setTimeout(e,1e3/60)},cancel:function(e){return clearTimeout(e)}}}if("function"!==typeof e.next)throw new Error("Scheduler is supposed to have next(cb) function");if("function"!==typeof e.cancel)throw new Error("Scheduler is supposed to have cancel(handle) function");return e}(t.scheduler),f=Object.keys(n);f.forEach((function(t){r[t]=e[t],u[t]=n[t]-e[t]}));var d,p="number"===typeof t.duration?t.duration:400,h=Math.max(1,.06*p),m=0;return d=l.next((function n(){var t=a(m/h);m+=1,x(t),m<=h?(d=l.next(n),s(e)):(d=0,setTimeout((function(){c(e)}),0))})),{cancel:function(){l.cancel(d),d=0}};function x(n){f.forEach((function(t){e[t]=u[t]*n+r[t]}))}},e.exports.makeAggregateRaf=u,e.exports.sharedScheduler=u()},39865:function(e){var n=.1,t="function"===typeof Float32Array;function r(e,n){return 1-3*n+3*e}function i(e,n){return 3*n-6*e}function o(e){return 3*e}function u(e,n,t){return((r(n,t)*e+i(n,t))*e+o(n))*e}function a(e,n,t){return 3*r(n,t)*e*e+2*i(n,t)*e+o(n)}function s(e){return e}e.exports=function(e,r,i,o){if(!(0<=e&&e<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===r&&i===o)return s;for(var c=t?new Float32Array(11):new Array(11),l=0;l<11;++l)c[l]=u(l*n,e,i);function f(t){for(var r=0,o=1;10!==o&&c[o]<=t;++o)r+=n;--o;var s=r+(t-c[o])/(c[o+1]-c[o])*n,l=a(s,e,i);return l>=.001?function(e,n,t,r){for(var i=0;i<4;++i){var o=a(n,t,r);if(0===o)return n;n-=(u(n,t,r)-e)/o}return n}(t,s,e,i):0===l?s:function(e,n,t,r,i){var o,a,s=0;do{(o=u(a=n+(t-n)/2,r,i)-e)>0?t=a:n=a}while(Math.abs(o)>1e-7&&++s<10);return a}(t,r,r+n,e,i)}return function(e){return 0===e?0:1===e?1:u(f(e),r,o)}}},86357:function(e,n,t){var r=t(10243);e.exports=function(e,n){return!!(null==e?0:e.length)&&r(e,n,0)>-1}},93550:function(e){e.exports=function(e,n,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(n,e[r]))return!0;return!1}},14269:function(e){e.exports=function(e,n,t,r){for(var i=e.length,o=t+(r?1:-1);r?o--:++o<i;)if(n(e[o],o,e))return o;return-1}},10243:function(e,n,t){var r=t(14269),i=t(71427),o=t(84751);e.exports=function(e,n,t){return n===n?o(e,n,t):r(e,i,t)}},71427:function(e){e.exports=function(e){return e!==e}},57491:function(e,n,t){var r=t(67268),i=t(86357),o=t(93550),u=t(59390),a=t(28809),s=t(27525);e.exports=function(e,n,t){var c=-1,l=i,f=e.length,d=!0,p=[],h=p;if(t)d=!1,l=o;else if(f>=200){var m=n?null:a(e);if(m)return s(m);d=!1,l=u,h=new r}else h=n?[]:p;e:for(;++c<f;){var x=e[c],v=n?n(x):x;if(x=t||0!==x?x:0,d&&v===v){for(var g=h.length;g--;)if(h[g]===v)continue e;n&&h.push(v),p.push(x)}else l(h,v,t)||(h!==p&&h.push(v),p.push(x))}return p}},28809:function(e,n,t){var r=t(66938),i=t(14669),o=t(27525),u=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=u},84751:function(e){e.exports=function(e,n,t){for(var r=t-1,i=e.length;++r<i;)if(e[r]===n)return r;return-1}},14669:function(e){e.exports=function(){}},23662:function(e,n,t){var r=t(57491);e.exports=function(e){return e&&e.length?r(e):[]}}}]);
//# sourceMappingURL=921.560cdbdf.chunk.js.map