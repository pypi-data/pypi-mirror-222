"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[231],{97734:function(e,n,t){t.d(n,{a:function(){return c}});var i=t(96234),r=t(78193),o=function(e,n){var t=new Set(Array.from(e.checkedIds));switch(n.type){case"toggle-one":var r=n.payload,o=r.checked,s=r.id;return o?t.add(s):t.delete(s),{lastCheckedId:s,checkedIds:t};case"toggle-slice":var c=n.payload,a=c.checked,l=c.id,u=c.allIds,d=e.lastCheckedId,p=d?u.indexOf(d):-1,h=u.indexOf(l);if(-1===p||-1===h)return e;var m=[p,h].sort(),x=(0,i.Z)(m,2),f=x[0],g=x[1];return u.slice(f,g+1).forEach((function(e){a?t.add(e):t.delete(e)})),{lastCheckedId:l,checkedIds:t};case"toggle-all":var j=n.payload,v=j.checked,y=j.allIds;return{lastCheckedId:null,checkedIds:v?new Set(y):new Set}}},s={checkedIds:new Set,lastCheckedId:null};function c(e){var n=r.useReducer(o,s),t=(0,i.Z)(n,2),c=t[0],a=t[1];return[c,{onToggleFactory:function(n){return function(t){var i=t.checked;t.shiftKey&&c.lastCheckedId?a({type:"toggle-slice",payload:{checked:i,id:n,allIds:e}}):a({type:"toggle-one",payload:{checked:i,id:n}})}},onToggleAll:function(n){a({type:"toggle-all",payload:{checked:n,allIds:e}})}}]}},76612:function(e,n,t){t.d(n,{_:function(){return c}});var i,r=t(71171),o=t(90239),s=t(31623),c=function(){var e=(0,o.a)(a).data;return!(null===e||void 0===e||!e.instance.hasInfo)},a=(0,s.Ps)(i||(i=(0,r.Z)(["\n  query InstanceConfigHasInfo {\n    instance {\n      id\n      hasInfo\n    }\n  }\n"])))},74492:function(e,n,t){t.d(n,{m:function(){return g}});var i=t(96234),r=t(3077),o=t(47515),s=t(32667),c=t(67888),a=t(45519),l=t(95714),u=t(92555),d=t(61623),p=t(78193),h=t(97412),m=t(20822),x=t(85514),f=t(35936),g=p.memo((function(e){var n=e.assetKeys,t=e.useTags,g=e.modalTitle,j=void 0===g?"Assets in Run":g,v=p.useState(!1),y=(0,i.Z)(v,2),w=y[0],C=y[1];if(!n||!n.length)return null;var Z=n.length,k=Z<=3?n:[],b=Z-k.length,R=b>0?(0,f.jsxs)(r.Vq,{title:j,onClose:function(){return C(!1)},style:{minWidth:"400px",maxWidth:"80vw",maxHeight:"70vh"},isOpen:w,children:[w?(0,f.jsx)(o.x,{padding:{bottom:12},border:{side:"bottom",color:s.w.KeylineGray,width:1},style:{overflowY:"auto"},background:s.w.White,children:(0,f.jsxs)(c.i,{children:[(0,f.jsx)("thead",{children:(0,f.jsx)("tr",{children:(0,f.jsx)("th",{children:"Asset key"})})}),(0,f.jsx)("tbody",{children:n.map((function(e,n){return(0,f.jsx)("tr",{children:(0,f.jsx)("td",{children:(0,f.jsx)(h.rU,{to:(0,x.p)(e),children:(0,m.ll)(e)},(0,m.Je)(e))})},"".concat((0,m.Je)(e),"-").concat(n))}))})]})}):null,(0,f.jsx)(r.cN,{children:(0,f.jsx)(a.zx,{intent:"primary",autoFocus:!0,onClick:function(){return C(!1)},children:"OK"})})]}):void 0;return t?(0,f.jsxs)(f.Fragment,{children:[k.map((function(e,n){return(0,f.jsx)(h.rU,{to:(0,x.p)(e),children:(0,f.jsx)(l.V,{intent:"none",interactive:!0,icon:"asset",children:(0,m.ll)(e)})},"".concat((0,m.Je)(e),"-").concat(n))})),b>0&&(0,f.jsx)(u.Z,{onClick:function(){return C(!0)},children:(0,f.jsxs)(l.V,{intent:"none",icon:"asset",children:[b," assets"]})}),R]}):(0,f.jsxs)(o.x,{flex:{direction:"row",gap:8},children:[(0,f.jsx)(d.JO,{color:s.w.Gray400,name:"asset",size:16,style:{marginTop:2}}),(0,f.jsxs)(o.x,{style:{flex:1},flex:{wrap:"wrap",display:"inline-flex"},children:[k.map((function(e,n){return(0,f.jsx)(h.rU,{to:(0,x.p)(e),style:{marginRight:4},children:"".concat((0,m.ll)(e)).concat(n<k.length-1?",":"")},(0,m.Je)(e))})),b>0&&k.length>0?(0,f.jsx)(u.Z,{onClick:function(){return C(!0)},children:" + ".concat(b," more")}):b>0?(0,f.jsx)(u.Z,{onClick:function(){return C(!0)},children:"".concat(b," assets")}):void 0]}),R]})}))},9089:function(e,n,t){t.d(n,{N:function(){return Z}});var i=t(32723),r=t(34795),o=t(96234),s=t(56666),c=t(33028),a=t(15541),l=t(80018),u=t(4537),d=t(45519),p=t(61623),h=t(32667),m=t(83473),x=t(3077),f=t(78193),g=t(49675),j=t(89622),v=t(35936),y=function(e){if("DeletePipelineRunSuccess"===(null===e||void 0===e?void 0:e.deletePipelineRun.__typename))throw new Error("Not an error!");return null===e||void 0===e?void 0:e.deletePipelineRun},w=function(e){return{step:"initial",frozenRuns:e,deletion:{completed:0,errors:{}}}},C=function(e,n){switch(n.type){case"reset":return w(n.frozenRuns);case"start":return(0,c.Z)((0,c.Z)({},e),{},{step:"deleting"});case"deletion-success":var t=e.deletion;return(0,c.Z)((0,c.Z)({},e),{},{step:"deleting",deletion:(0,c.Z)((0,c.Z)({},t),{},{completed:t.completed+1})});case"deletion-error":var i=e.deletion;return(0,c.Z)((0,c.Z)({},e),{},{step:"deleting",deletion:(0,c.Z)((0,c.Z)({},i),{},{completed:i.completed+1,errors:(0,c.Z)((0,c.Z)({},i.errors),{},(0,s.Z)({},n.id,n.error))})});case"complete":return(0,c.Z)((0,c.Z)({},e),{},{step:"completed"})}},Z=function(e){var n=e.isOpen,t=e.onClose,s=e.onComplete,c=e.onTerminateInstead,Z=e.selectedRuns,k=f.useRef(Z),b=f.useReducer(C,k.current,w),R=(0,o.Z)(b,2),E=R[0],N=R[1],I=Object.keys(E.frozenRuns),T=I.length,O=I.filter((function(e){return E.frozenRuns[e]})).length;f.useEffect((function(){n&&N({type:"reset",frozenRuns:k.current})}),[n]),f.useEffect((function(){n||(k.current=Z)}),[n,Z]);var A=(0,a.D)(j.be),S=(0,o.Z)(A,1)[0],_=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){var n,t,r,o,c,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N({type:"start"}),n=Object.keys(E.frozenRuns),t=0,r=n;case 3:if(!(t<r.length)){e.next=13;break}return o=r[t],e.next=7,S({variables:{runId:o}});case 7:c=e.sent,"DeletePipelineRunSuccess"===(null===(a=c.data)||void 0===a?void 0:a.deletePipelineRun.__typename)?N({type:"deletion-success"}):N({type:"deletion-error",id:o,error:y(a)});case 10:t++,e.next=3;break;case 13:N({type:"complete"}),s();case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P="deleting"!==E.step;return(0,v.jsxs)(x.Vq,{isOpen:n,title:"Delete runs",canEscapeKeyClose:P,canOutsideClickClose:P,onClose:t,children:[(0,v.jsx)(x.a7,{children:(0,v.jsxs)(u.Z,{direction:"column",spacing:24,children:[function(){switch(E.step){case"initial":return(0,v.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,v.jsx)("div",{children:"".concat(T," ").concat(1===T?"run":"runs"," will be deleted.")}),(0,v.jsx)("div",{children:"Deleting runs will not prevent them from continuing to execute, and may result in unexpected behavior."}),O?(0,v.jsx)("div",{children:O>1?(0,v.jsxs)(v.Fragment,{children:["".concat(O," of these runs can be terminated. "),(0,v.jsx)("strong",{children:"Please consider terminating these runs instead of deleting them."})]}):(0,v.jsxs)(v.Fragment,{children:["1 run can be terminated instead. ",(0,v.jsx)("strong",{children:"Please consider terminating this run instead of deleting it."})]})}):null,(0,v.jsx)("div",{children:"Do you wish to continue with deletion?"})]});case"deleting":case"completed":var e=T>0?E.deletion.completed/T:1;return(0,v.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,v.jsx)("div",{children:"Deleting\u2026"}),(0,v.jsx)(l.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"deleting"===E.step?(0,v.jsx)(g.c,{message:"Deletion in progress, please do not navigate away yet."}):null]});default:return null}}(),function(){if("initial"===E.step)return null;if("deleting"===E.step)return(0,v.jsx)("div",{children:"Please do not close the window or navigate away during deletion."});var e=E.deletion.errors,n=Object.keys(e).length,t=E.deletion.completed-n;return(0,v.jsxs)(u.Z,{direction:"column",spacing:8,children:[t?(0,v.jsxs)(u.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,v.jsx)(p.JO,{name:"check_circle",color:h.w.Green500}),(0,v.jsx)("div",{children:"Successfully deleted ".concat(t," ").concat(1===t?"run":"runs",".")})]}):null,n?(0,v.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,v.jsxs)(u.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,v.jsx)(p.JO,{name:"warning",color:h.w.Yellow500}),(0,v.jsx)("div",{children:"Could not delete ".concat(n," ").concat(1===n?"run":"runs",".")})]}),(0,v.jsx)("ul",{children:Object.keys(e).map((function(n){var t;return(0,v.jsx)("li",{children:(0,v.jsxs)(u.Z,{direction:"row",spacing:8,children:[(0,v.jsx)(m.fv,{children:n.slice(0,8)}),e[n]?(0,v.jsx)("div",{children:null===(t=e[n])||void 0===t?void 0:t.message}):null]})},n)}))})]}):null]})}()]})}),(0,v.jsx)(x.cN,{children:function(){switch(E.step){case"initial":return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.zx,{intent:"none",onClick:t,children:"Cancel"}),(0,v.jsx)(d.zx,{intent:"danger",onClick:_,children:"Yes, delete ".concat("".concat(T," ").concat(1===T?"run":"runs"))}),O?(0,v.jsx)(d.zx,{intent:"primary",onClick:c,children:"Terminate ".concat("".concat(O," ").concat(1===O?"run":"runs")," instead")}):null]});case"deleting":return(0,v.jsx)(d.zx,{intent:"danger",disabled:!0,children:"Deleting\u2026"});case"completed":return(0,v.jsx)(d.zx,{intent:"primary",onClick:t,children:"Done"})}}()})]})}},49675:function(e,n,t){t.d(n,{c:function(){return s}});var i=t(78193),r=t(50032),o=t(35936),s=function(e){return i.useEffect((function(){var e=function(e){e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[]),(0,o.jsx)(r.NL,{message:e.message})}},25383:function(e,n,t){t.d(n,{F:function(){return m}});var i,r=t(71171),o=t(60319),s=t(90239),c=t(31623),a=t(47515),l=t(62459),u=(t(78193),t(97412)),d=t(62638),p=t(92014),h=t(35936),m=function(e){var n=e.runId,t=(0,s.a)(x,{variables:{runId:n}});if(t.loading||!t.data)return(0,h.jsx)(f,{children:(0,h.jsx)(a.x,{padding:24,flex:{justifyContent:"center"},children:(0,h.jsx)(l.$,{purpose:"section"})})});var i=t.data.pipelineRunOrError;if("Run"!==i.__typename)return(0,h.jsx)(p.T9,{error:i});if("RunStatsSnapshot"!==i.stats.__typename)return(0,h.jsx)(p.T9,{error:i.stats});var r="/runs/".concat(n);return(0,h.jsxs)(f,{children:[(0,h.jsx)(u.rU,{to:"".concat(r,"?logs=type:STEP_SUCCESS"),children:"".concat(i.stats.stepsSucceeded," steps succeeded")}),(0,h.jsx)(u.rU,{to:"".concat(r,"?logs=type:STEP_FAILURE"),children:"".concat(i.stats.stepsFailed," steps failed")}),(0,h.jsx)(u.rU,{to:"".concat(r,"?logs=type:ASSET_MATERIALIZATION"),children:"".concat(i.stats.materializations," materializations")}),(0,h.jsx)(u.rU,{to:"".concat(r,"?logs=type:STEP_EXPECTATION_RESULT"),children:"".concat(i.stats.expectations," expectations passed")})]})},x=(0,c.Ps)(i||(i=(0,r.Z)(["\n  query RunStatsQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on RunNotFoundError {\n        message\n      }\n      ... on Run {\n        id\n        pipelineName\n        stats {\n          ... on RunStatsSnapshot {\n            id\n            stepsSucceeded\n            stepsFailed\n            expectations\n            materializations\n          }\n          ...PythonErrorFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"])),d.B),f=o.ZP.div.withConfig({displayName:"RunStats__RunStatsDetailsContainer",componentId:"sc-7pgndz-0"})(["min-width:200px;padding:12px;color:white;font-size:12px;& > a{display:block;}"])},15734:function(e,n,t){t.d(n,{K9:function(){return j},O_:function(){return y},hk:function(){return g}});var i,r,o=t(71171),s=t(33028),c=t(59740),a=t(60319),l=t(73070),u=t(62459),d=t(78193),p=t(25383),h=t(25465),m=t(20967),x=t(35936),f=["runId"],g=d.memo((function(e){var n=e.runId,t=(0,c.Z)(e,f);return(0,x.jsx)(l.J,{position:"bottom",interactionKind:"hover",content:(0,x.jsx)(p.F,{runId:n}),hoverOpenDelay:100,children:(0,x.jsx)(j,(0,s.Z)({},t))})})),j=d.memo((function(e){var n=e.status,t=e.size;return"STARTED"===n||"CANCELING"===n?(0,x.jsx)(u.$,{purpose:"caption-text"}):"SCHEDULED"===n?(0,x.jsx)(y,{status:n,size:t||12}):(0,x.jsx)(y,{status:n,size:t||12,pulse:m.Ys.has(n)||m.sy.has(n)})})),v=(0,a.F4)(i||(i=(0,o.Z)(["\n  0% {\n    filter: brightness(1);\n  }\n\n  50% {\n    filter: brightness(0.7);\n  }\n\n  100% {\n    filter: brightness(1);\n  }\n"]))),y=a.ZP.div.withConfig({displayName:"RunStatusDots__RunStatusDot",componentId:"sc-m2w7pp-0"})(["width:","px;height:","px;border-radius:","px;transition:filter 200ms linear;"," background:",";&:hover{animation:none;filter:brightness(0.7);}"],(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.size/2}),(function(e){return e.pulse?(0,a.iv)(r||(r=(0,o.Z)(["\n          animation: "," 2s infinite;\n        "])),v):null}),(function(e){var n=e.status;return h.YM[n]}))},25465:function(e,n,t){t.d(n,{KG:function(){return g},M9:function(){return v},YM:function(){return f},Zr:function(){return j},fi:function(){return x}});var i=t(32667),r=t(95714),o=t(47515),s=t(83473),c=t(73070),a=(t(78193),t(88949)),l=t(23555),u=t(25383),d=t(15734),p=t(35936),h=function(e){switch(e){case l.VOA.QUEUED:case l.VOA.NOT_STARTED:case l.VOA.CANCELED:case l.VOA.MANAGED:return"none";case l.VOA.SUCCESS:return"success";case l.VOA.FAILURE:return"danger";case l.VOA.STARTING:case l.VOA.STARTED:case l.VOA.CANCELING:return"primary";default:return(0,a.UT)(e)}},m=function(e){switch(e){case l.VOA.QUEUED:return"Queued";case l.VOA.SUCCESS:return"Success";case l.VOA.STARTING:return"Starting";case l.VOA.NOT_STARTED:return"Not started";case l.VOA.FAILURE:return"Failure";case l.VOA.STARTED:return"Started";case l.VOA.MANAGED:return"Managed";case l.VOA.CANCELING:return"Canceling";case l.VOA.CANCELED:return"Canceled";default:return(0,a.UT)(e)}},x=function(e){switch(e){case l.VOA.CANCELED:return"Canceled";case l.VOA.CANCELING:return"Canceling";case l.VOA.FAILURE:return"Failed";case l.VOA.STARTING:case l.VOA.STARTED:return"In progress";case l.VOA.QUEUED:return"Queued";case l.VOA.SUCCESS:return"Completed";case l.VOA.MANAGED:case l.VOA.NOT_STARTED:return"Missing";default:return(0,a.UT)(e)}},f={QUEUED:i.w.Blue200,NOT_STARTED:i.w.Gray600,MANAGED:i.w.Gray400,STARTED:i.w.Blue500,STARTING:i.w.Blue500,CANCELING:i.w.Blue500,SUCCESS:i.w.Green500,FAILURE:i.w.Red500,CANCELED:i.w.Gray400,SCHEDULED:i.w.Blue200},g=function(e){var n=e.status;return(0,p.jsx)(r.V,{intent:h(n),children:(0,p.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,p.jsx)(d.K9,{status:n,size:10}),(0,p.jsx)("div",{children:m(n)})]})})},j=function(e){var n=e.runId,t=e.status;return(0,p.jsx)(r.V,{intent:h(t),children:(0,p.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,p.jsx)(d.K9,{status:t,size:10}),(0,p.jsx)(s.aU,{children:n.slice(0,8)})]})})},v=function(e){var n=e.runId,t=e.status;return(0,p.jsx)(c.J,{position:"bottom-left",interactionKind:"hover",content:(0,p.jsx)(u.F,{runId:n}),hoverOpenDelay:100,usePortal:!0,children:(0,p.jsx)(g,{status:t})})}},8709:function(e,n,t){t.d(n,{Z:function(){return ke},A:function(){return Ze}});var i,r=t(71171),o=t(96234),s=t(60319),c=t(31623),a=t(47515),l=t(67445),u=t(61623),d=t(67888),p=t(17914),h=t(83473),m=t(95714),x=t(32667),f=t(72835),g=t(92555),j=t(3077),v=t(45519),y=t(78193),w=t(97412),C=t(30382),Z=t(20822),k=t(97734),b=t(24265),R=t(85279),E=t(80500),N=t(63167),I=t(74492),T=t(56666),O=t(32723),A=t(34795),S=t(33028),_=t(15541),P=t(44719),z=t(73070),D=t(85357),F=t(44229),L=t(9886),V=t(50032),U=t(33418),M=t(82182),G=t(35740),J=t(22260),K=t(23555),H=t(8686),B=t(48341),q=t(79986),Y=t(92761),Q=t(9089),$=t(80018),W=t(4537),X=t(49675),ee=t(89622),ne=t(35936),te=function(e){if("LaunchRunSuccess"===(null===e||void 0===e?void 0:e.launchPipelineReexecution.__typename))throw new Error("Not an error!");return null===e||void 0===e?void 0:e.launchPipelineReexecution},ie=function(e){if(!e)return"Unknown error";switch(e.__typename){case"ConflictingExecutionParamsError":return"Conflicting execution parameters";case"InvalidOutputError":return"Invalid output";case"InvalidStepError":return"Invalid step";case"NoModeProvidedError":return"No mode provided";case"PipelineNotFoundError":return"Job not found in workspace";case"PresetNotFoundError":return"Preset not found";case"PythonError":return e.message;case"RunConfigValidationInvalid":return"Run config invalid";case"RunConflict":return"Run conflict";case"UnauthorizedError":return"Re-execution not authorized";case"InvalidSubsetError":return"Invalid op subset: "+e.message;default:return"Unknown error"}},re=function(e){return{frozenRuns:e,step:"initial",reexecution:{completed:0,errors:{}}}},oe=function(e,n){switch(n.type){case"reset":return re(n.frozenRuns);case"start":return(0,S.Z)((0,S.Z)({},e),{},{step:"reexecuting"});case"reexecution-success":var t=e.reexecution;return(0,S.Z)((0,S.Z)({},e),{},{step:"reexecuting",reexecution:(0,S.Z)((0,S.Z)({},t),{},{completed:t.completed+1})});case"reexecution-error":var i=e.reexecution;return(0,S.Z)((0,S.Z)({},e),{},{step:"reexecuting",reexecution:(0,S.Z)((0,S.Z)({},i),{},{completed:i.completed+1,errors:(0,S.Z)((0,S.Z)({},i.errors),{},(0,T.Z)({},n.id,n.error))})});case"complete":return(0,S.Z)((0,S.Z)({},e),{},{step:"completed"})}},se=function(e){var n=e.isOpen,t=e.onClose,i=e.onComplete,r=e.reexecutionStrategy,s=e.selectedRuns,c=y.useRef(s),a=y.useReducer(oe,c.current,re),l=(0,o.Z)(a,2),d=l[0],p=l[1],m=Object.keys(d.frozenRuns).length;y.useEffect((function(){n&&p({type:"reset",frozenRuns:c.current})}),[n]),y.useEffect((function(){n||(c.current=s)}),[n,s]);var f=(0,_.D)(ee.kO),g=(0,o.Z)(f,1)[0],w=function(){var e=(0,A.Z)((0,O.Z)().mark((function e(){var n,t,o,s,c,a;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p({type:"start"}),n=Object.keys(d.frozenRuns),t=0,o=n;case 3:if(!(t<o.length)){e.next=13;break}return s=o[t],e.next=7,g({variables:{reexecutionParams:{parentRunId:s,strategy:r}}});case 7:c=e.sent,"LaunchRunSuccess"===(null===(a=c.data)||void 0===a?void 0:a.launchPipelineReexecution.__typename)?p({type:"reexecution-success"}):p({type:"reexecution-error",id:s,error:te(a)});case 10:t++,e.next=3;break;case 13:p({type:"complete"}),i(d.reexecution);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C="reexecuting"!==d.step;return(0,ne.jsxs)(j.Vq,{isOpen:n,title:r===K.hmq.ALL_STEPS?"Re-execute runs":"Re-execute runs from failure",canEscapeKeyClose:C,canOutsideClickClose:C,onClose:t,children:[(0,ne.jsx)(j.a7,{children:(0,ne.jsxs)(W.Z,{direction:"column",spacing:24,children:[function(){switch(d.step){case"initial":if(!m)return(0,ne.jsxs)(W.Z,{direction:"column",spacing:16,children:[(0,ne.jsx)("div",{children:"No runs selected for re-execution."}),(0,ne.jsx)("div",{children:"The runs you selected may already have finished executing."})]});return(0,ne.jsx)(W.Z,{direction:"column",spacing:16,children:(0,ne.jsx)("div",{children:r===K.hmq.ALL_STEPS?(0,ne.jsxs)("span",{children:["".concat(m," ").concat(1===m?"run":"runs"," will be re-executed "),(0,ne.jsx)("strong",{children:"with all steps"}),". Do you wish to continue?"]}):(0,ne.jsxs)("span",{children:["".concat(m," ").concat(1===m?"run":"runs"," will be re-executed "),(0,ne.jsx)("strong",{children:"from failure"}),". Do you wish to continue?"]})})});case"reexecuting":case"completed":var e=m>0?d.reexecution.completed/m:1;return(0,ne.jsxs)(W.Z,{direction:"column",spacing:8,children:[(0,ne.jsx)($.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"reexecuting"===d.step?(0,ne.jsx)(X.c,{message:"Re-execution in progress, please do not navigate away yet."}):null]});default:return null}}(),function(){if("initial"===d.step)return null;if("reexecuting"===d.step)return(0,ne.jsx)("div",{children:"Please do not close the window or navigate away during re-execution."});var e=d.reexecution.errors,n=Object.keys(e).length,t=d.reexecution.completed-n;return(0,ne.jsxs)(W.Z,{direction:"column",spacing:8,children:[t?(0,ne.jsxs)(W.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,ne.jsx)(u.JO,{name:"check_circle",color:x.w.Green500}),(0,ne.jsx)("div",{children:"Successfully requested re-execution for ".concat(t," ").concat(1===t?"run":"runs",".")})]}):null,n?(0,ne.jsxs)(W.Z,{direction:"column",spacing:8,children:[(0,ne.jsxs)(W.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,ne.jsx)(u.JO,{name:"warning",color:x.w.Yellow500}),(0,ne.jsx)("div",{children:"Could not request re-execution for ".concat(n," ").concat(1===n?"run":"runs",":")})]}),(0,ne.jsx)("ul",{children:Object.keys(e).map((function(n){return(0,ne.jsx)("li",{children:(0,ne.jsxs)(W.Z,{direction:"row",spacing:8,alignItems:"baseline",children:[(0,ne.jsx)(h.fv,{children:n.slice(0,8)}),e[n]?(0,ne.jsx)("div",{children:ie(e[n])}):null]})},n)}))})]}):null]})}()]})}),(0,ne.jsx)(j.cN,{children:function(){switch(d.step){case"initial":return m?(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(v.zx,{intent:"none",onClick:t,children:"Cancel"}),(0,ne.jsx)(v.zx,{intent:"primary",onClick:w,children:"Re-execute ".concat("".concat(m," ").concat(1===m?"run":"runs"))})]}):(0,ne.jsx)(v.zx,{intent:"none",onClick:t,children:"OK"});case"reexecuting":return(0,ne.jsx)(v.zx,{intent:"primary",disabled:!0,children:"Re-executing ".concat("".concat(m," ").concat(1===m?"run":"runs","..."))});case"completed":return(0,ne.jsx)(v.zx,{intent:"primary",onClick:t,children:"Done"})}}()})]})},ce=t(20967),ae=t(21687),le=t(69654),ue=t(37870),de=y.memo((function(e){var n,t=e.run,i=e.onAddTag,r=e.additionalActionsForRun,s=y.useContext(ee.Lw).refetch,c=y.useState("none"),l=(0,o.Z)(c,2),d=l[0],p=l[1],h=y.useContext(U.I).rootServerURI,m=(0,V.k6)(),x=(0,J.m)(),f=(0,_.D)(ee.kO,{onCompleted:s}),g=(0,o.Z)(f,1)[0],w=(0,P.t)(me,{variables:{runId:t.id}}),C=(0,o.Z)(w,2),Z=C[0],k=C[1],b=k.called,I=k.loading,K=k.data,$=function(){p("none")},W=function(){s()},X="Run"===(null===K||void 0===K||null===(n=K.pipelineRunOrError)||void 0===n?void 0:n.__typename)?null===K||void 0===K?void 0:K.pipelineRunOrError:null,te=null===X||void 0===X?void 0:X.runConfigYaml,ie=(0,E.n)(X),re=(0,ue.J)((0,S.Z)((0,S.Z)({},t),{},{parentPipelineSnapshotId:null===X||void 0===X?void 0:X.parentPipelineSnapshotId})),oe=ce.cv.has(t.status),se=!(!ie||!(0,Y.E8)(null===ie||void 0===ie?void 0:ie.match,t.pipelineName)),de=!!b&&!I,pe=y.useMemo((function(){return t.hasReExecutePermission?re?{disabled:re.disabled,message:re.tooltip}:de?{disabled:!1}:{disabled:!0}:{disabled:!0,message:G.Qr}}),[t.hasReExecutePermission,re,de]);return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsxs)(v.zH,{children:[(0,ne.jsx)(R.A,{to:"/runs/".concat(t.id),children:"View run"}),(0,ne.jsx)(z.J,{content:(0,ne.jsxs)(D.v2,{children:[(0,ne.jsx)(D.sN,{tagName:"button",text:I?"Loading configuration...":"View configuration...",disabled:!te,icon:"open_in_new",onClick:function(){return p("config")}}),(0,ne.jsx)(D.sN,{tagName:"button",text:(0,ne.jsxs)("div",{style:{display:"contents"},children:["View all tags",(0,ne.jsx)(a.x,{flex:{justifyContent:"center",alignItems:"center",display:"inline-flex"},padding:{horizontal:8},children:(0,ne.jsx)(xe,{children:"t"})})]}),icon:"tag",onClick:function(){return p("tags")}}),t.pipelineSnapshotId?(0,ne.jsx)(fe,{to:(0,B.sS)(t.pipelineName,t.pipelineSnapshotId),children:(0,ne.jsx)(D.sN,{tagName:"button",icon:"job",text:"View snapshot",onClick:function(){return p("tags")}})}):null,(0,ne.jsx)(D.R,{}),(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(F.u,{content:t.hasReExecutePermission?he:H.U,position:"left",disabled:de&&t.hasReExecutePermission,targetTagName:"div",children:(0,ne.jsx)(q.U,{text:"Open in Launchpad...",disabled:!de||!t.hasReExecutePermission,icon:"edit",to:(0,N.$O)({id:t.id,pipelineName:t.pipelineName,repositoryName:null===ie||void 0===ie?void 0:ie.match.repository.name,repositoryLocationName:null===ie||void 0===ie?void 0:ie.match.repositoryLocation.name,isJob:se})})}),(0,ne.jsx)(F.u,{content:pe.message||"",position:"left",canShow:pe.disabled,targetTagName:"div",children:(0,ne.jsx)(D.sN,{tagName:"button",text:"Re-execute",disabled:pe.disabled,icon:"refresh",onClick:(0,A.Z)((0,O.Z)().mark((function e(){var n,i;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ie||!te){e.next=5;break}return e.next=3,g({variables:(0,ee.kz)({run:(0,S.Z)((0,S.Z)({},t),{},{runConfigYaml:te}),style:{type:"all"},repositoryLocationName:ie.match.repositoryLocation.name,repositoryName:ie.match.repository.name})});case 3:i=e.sent,(0,ee.lF)(t.pipelineName,null===(n=i.data)||void 0===n?void 0:n.launchPipelineReexecution,m,{behavior:"open"});case 5:case"end":return e.stop()}}),e)})))})}),oe||!t.hasTerminatePermission?null:(0,ne.jsx)(D.sN,{tagName:"button",icon:"cancel",text:"Terminate",onClick:function(){return p("terminate")}}),null===r||void 0===r?void 0:r(t),(0,ne.jsx)(D.R,{})]}),(0,ne.jsx)(D.AL,{text:"Download debug file",icon:"download_for_offline",download:!0,href:"".concat(h,"/download_debug/").concat(t.id)}),t.hasDeletePermission?(0,ne.jsx)(D.sN,{tagName:"button",icon:"delete",text:"Delete",intent:"danger",onClick:function(){return p("delete")}}):null]}),position:"bottom-right",onOpening:function(){b||Z()},children:(0,ne.jsx)(v.zx,{icon:(0,ne.jsx)(u.JO,{name:"expand_more"})})})]}),t.hasTerminatePermission?(0,ne.jsx)(le.A,{isOpen:"terminate"===d,onClose:$,onComplete:W,selectedRuns:(0,T.Z)({},t.id,t.canTerminate)}):null,t.hasDeletePermission?(0,ne.jsx)(Q.N,{isOpen:"delete"===d,onClose:$,onComplete:W,onTerminateInstead:function(){return p("terminate")},selectedRuns:(0,T.Z)({},t.id,t.canTerminate)}):null,(0,ne.jsxs)(j.Vq,{isOpen:"tags"===d,title:"Tags",canOutsideClickClose:!0,canEscapeKeyClose:!0,onClose:$,children:[(0,ne.jsx)(j.a7,{children:(0,ne.jsx)(ae.Q,{tags:t.tags,mode:se?"default"!==t.mode?t.mode:null:t.mode,onAddTag:i})}),(0,ne.jsx)(j.cN,{topBorder:!0,children:(0,ne.jsx)(v.zx,{intent:"primary",onClick:$,children:"Close"})})]}),(0,ne.jsxs)(j.Vq,{isOpen:"config"===d,title:"Config",canOutsideClickClose:!0,canEscapeKeyClose:!0,onClose:$,children:[(0,ne.jsx)(L.NU,{value:te||"",options:{lineNumbers:!0,mode:"yaml"}}),(0,ne.jsxs)(j.cN,{topBorder:!0,children:[(0,ne.jsx)(v.zx,{intent:"none",onClick:(0,A.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(te||""),e.next=3,(0,M.B7)({intent:"success",icon:"copy_to_clipboard_done",message:"Copied!"});case 3:case"end":return e.stop()}}),e)}))),children:"Copy config"}),(0,ne.jsx)(v.zx,{intent:"primary",onClick:$,children:"OK"})]})]})]})})),pe=y.memo((function(e){var n=e.selected,t=e.clearSelection,i=y.useContext(ee.Lw).refetch,r=y.useState("none"),s=(0,o.Z)(r,2),c=s[0],a=s[1],l=y.useMemo((function(){return n.some((function(e){return e.hasTerminatePermission}))}),[n]),d=y.useMemo((function(){return n.some((function(e){return e.hasTerminatePermission}))}),[n]),p=y.useMemo((function(){return n.some((function(e){return e.hasReExecutePermission}))}),[n]),h=!l&&!d,m=n.filter((function(e){return!ce.cv.has(null===e||void 0===e?void 0:e.status)&&e.hasTerminatePermission})),x=m.map((function(e){return e.id})),f=m.reduce((function(e,n){return(0,S.Z)((0,S.Z)({},e),{},(0,T.Z)({},n.id,n.canTerminate))}),{}),g=n.map((function(e){return e.id})),j=n.reduce((function(e,n){return(0,S.Z)((0,S.Z)({},e),{},(0,T.Z)({},n.id,n.canTerminate))}),{}),w=n.filter((function(e){return ce.hd.has(null===e||void 0===e?void 0:e.status)&&e.hasReExecutePermission})),C=w.reduce((function(e,n){return(0,S.Z)((0,S.Z)({},e),{},(0,T.Z)({},n.id,n.id))}),{}),Z=n.filter((function(e){return ce.cv.has(null===e||void 0===e?void 0:e.status)&&e.hasReExecutePermission})),k=Z.reduce((function(e,n){return(0,S.Z)((0,S.Z)({},e),{},(0,T.Z)({},n.id,n.id))}),{}),b=function(){a("none")},R=function(){t(),i()};return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(z.J,{disabled:h||0===n.length,content:(0,ne.jsxs)(D.v2,{children:[l?(0,ne.jsx)(D.sN,{icon:"cancel",text:"Terminate ".concat(x.length," ").concat(1===x.length?"run":"runs"),disabled:0===x.length,onClick:function(){a("terminate")}}):null,d?(0,ne.jsx)(D.sN,{icon:"delete",intent:"danger",text:"Delete ".concat(g.length," ").concat(1===g.length?"run":"runs"),disabled:0===g.length,onClick:function(){a("delete")}}):null,p?(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(D.sN,{icon:"refresh",text:"Re-execute ".concat(Z.length," ").concat(1===Z.length?"run":"runs"),disabled:0===Z.length,onClick:function(){a("reexecute")}}),(0,ne.jsx)(D.sN,{icon:"refresh",text:"Re-execute ".concat(w.length," ").concat(1===w.length?"run":"runs"," from failure"),disabled:0===w.length,onClick:function(){a("reexecute-from-failure")}})]}):null]}),position:"bottom-right",children:(0,ne.jsx)(v.zx,{disabled:h||0===n.length,rightIcon:(0,ne.jsx)(u.JO,{name:"expand_more"}),intent:"primary",children:"Actions"})}),(0,ne.jsx)(le.A,{isOpen:"terminate"===c,onClose:b,onComplete:R,selectedRuns:f}),(0,ne.jsx)(Q.N,{isOpen:"delete"===c,onClose:b,onComplete:R,onTerminateInstead:function(){return a("terminate")},selectedRuns:j}),(0,ne.jsx)(se,{isOpen:"reexecute-from-failure"===c,onClose:b,onComplete:R,selectedRuns:C,reexecutionStrategy:K.hmq.FROM_FAILURE}),(0,ne.jsx)(se,{isOpen:"reexecute"===c,onClose:b,onComplete:R,selectedRuns:k,reexecutionStrategy:K.hmq.ALL_STEPS})]})})),he="Launchpad is unavailable because the pipeline is not present in the current repository.",me=(0,c.Ps)(i||(i=(0,r.Z)(["\n  query PipelineEnvironmentQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        pipelineName\n        pipelineSnapshotId\n        runConfigYaml\n        pipelineName\n        parentPipelineSnapshotId\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n      }\n    }\n  }\n"]))),xe=s.ZP.div.withConfig({displayName:"RunActionsMenu__SlashShortcut",componentId:"sc-1et2hvz-0"})(["border-radius:4px;padding:0px 6px;background:",";color:",";"],x.w.Gray100,x.w.Gray500),fe=(0,s.ZP)(w.rU).withConfig({displayName:"RunActionsMenu__LinkNoUnderline",componentId:"sc-1et2hvz-1"})(["text-decoration:none !important;"]),ge=t(1360),je=t(68506);function ve(e){var n,t=e.run.tags||[],i=t.find((function(e){return e.key===je.H.ScheduleName})),r=t.find((function(e){return e.key===je.H.SensorName})),o=t.find((function(e){return e.key===je.H.User})),s=t.find((function(e){return e.key===je.H.Automaterialize||e.key===je.H.CreatedBy&&"auto_materialize"===e.value})),c=t.find((function(e){return e.key===je.H.CreatedBy})),l=(0,ge.C)().UserDisplay;return n=o?(0,ne.jsx)(l,{email:o.value}):i?(0,ne.jsx)(m.V,{icon:"schedule",children:i.value},"schedule"):r?(0,ne.jsx)(m.V,{icon:"sensors",children:r.value},"sensor"):s?(0,ne.jsx)(m.V,{icon:"auto_materialize_policy",children:"Auto-materialize policy"},"automaterialize"):(0,ne.jsx)(m.V,{icon:"account_circle",children:"Manually launched"}),(0,ne.jsx)(a.x,{flex:{direction:"column",alignItems:"flex-start"},children:n||(null===c||void 0===c?void 0:c.value)})}var ye,we=t(25465),Ce=t(95904),Ze=function(e){var n=e.runs,t=e.filter,i=e.onAddTag,r=e.highlightedIds,s=e.actionBarComponents,c=e.belowActionBarComponents,h=e.hideCreatedBy,m=e.emptyState,x=n.map((function(e){return e.id})),f=(0,k.a)(x),g=(0,o.Z)(f,2),j=g[0].checkedIds,v=g[1],w=v.onToggleFactory,C=v.onToggleAll,Z=y.useMemo((function(){return n.some((function(e){return e.hasTerminatePermission||e.hasDeletePermission}))}),[n]);var b=n.filter((function(e){return j.has(e.id)}));return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(Ee,{top:(0,ne.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center",grow:1},children:[s,(0,ne.jsx)(pe,{selected:b,clearSelection:function(){return C(!1)}})]}),bottom:c}),function(){if(0===n.length){var o=!!Object.keys(t||{}).length;return m?(0,ne.jsx)(ne.Fragment,{children:m()}):(0,ne.jsx)("div",{children:(0,ne.jsx)(a.x,{margin:{vertical:32},children:o?(0,ne.jsx)(l.t,{icon:"run",title:"No matching runs",description:"No runs were found for this filter."}):(0,ne.jsx)(l.t,{icon:"run",title:"No runs found",description:(0,ne.jsxs)(a.x,{flex:{direction:"column",gap:12},children:[(0,ne.jsx)("div",{children:"You have not launched any runs yet."}),(0,ne.jsxs)(a.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,ne.jsx)(R.A,{icon:(0,ne.jsx)(u.JO,{name:"add_circle"}),to:"/overview/jobs",children:"Launch a run"}),(0,ne.jsx)("span",{children:"or"}),(0,ne.jsx)(R.A,{icon:(0,ne.jsx)(u.JO,{name:"materialization"}),to:"/asset-groups",children:"Materialize an asset"})]})]})})})})}return(0,ne.jsxs)(d.i,{children:[(0,ne.jsx)("thead",{children:(0,ne.jsxs)("tr",{children:[Z?(0,ne.jsx)("th",{style:{width:42,paddingTop:0,paddingBottom:0},children:(0,ne.jsx)(p.X,{indeterminate:j.size>0&&j.size!==n.length,checked:j.size===n.length,onChange:function(e){e.target instanceof HTMLInputElement&&C(e.target.checked)}})}):null,(0,ne.jsx)("th",{style:{width:90},children:"Run ID"}),(0,ne.jsx)("th",{style:{width:180},children:"Created date"}),(0,ne.jsx)("th",{children:"Target"}),h?null:(0,ne.jsx)("th",{style:{width:160},children:"Launched by"}),(0,ne.jsx)("th",{style:{width:120},children:"Status"}),(0,ne.jsx)("th",{style:{width:190},children:"Duration"}),e.additionalColumnHeaders,(0,ne.jsx)("th",{style:{width:52}})]})}),(0,ne.jsx)("tbody",{children:n.map((function(n){var t;return(0,ne.jsx)(be,{canTerminateOrDelete:n.hasTerminatePermission||n.hasDeletePermission,run:n,onAddTag:i,checked:j.has(n.id),additionalColumns:null===(t=e.additionalColumnsForRow)||void 0===t?void 0:t.call(e,n),additionalActionsForRun:e.additionalActionsForRun,onToggleChecked:w(n.id),isHighlighted:r&&r.includes(n.id),hideCreatedBy:h},n.id)}))})]})}()]})},ke=(0,c.Ps)(ye||(ye=(0,r.Z)(["\n  fragment RunTableRunFragment on Run {\n    id\n    status\n    stepKeysToExecute\n    canTerminate\n    hasReExecutePermission\n    hasTerminatePermission\n    hasDeletePermission\n    mode\n    rootRunId\n    parentRunId\n    pipelineSnapshotId\n    pipelineName\n    repositoryOrigin {\n      id\n      repositoryName\n      repositoryLocationName\n    }\n    solidSelection\n    assetSelection {\n      ... on AssetKey {\n        path\n      }\n    }\n    status\n    tags {\n      key\n      value\n    }\n    ...RunTimeFragment\n  }\n\n  ","\n"])),ee.$X),be=function(e){var n,t=e.run,i=e.canTerminateOrDelete,r=e.onAddTag,s=e.checked,c=e.onToggleChecked,l=e.additionalColumns,d=e.additionalActionsForRun,k=e.isHighlighted,R=e.hideCreatedBy,T=t.pipelineName,O=(0,E.r)(t),A=y.useMemo((function(){if(O){var e=O.match.repository.pipelines.find((function(e){return e.name===T}));return!(null===e||void 0===e||!e.isJob)}return!1}),[O,T]),S=t.tags.some((function(e){return e.key===je.H.ParentRunId})),_=t.tags.find((function(e){return e.key===je.H.Backfill})),P=t.tags.find((function(e){return e.key===je.H.Partition})),z=t.tags.find((function(e){return e.key===je.H.PartitionSet})),D=t.tags.find((function(e){return e.key===je.H.AssetPartitionRangeStart})),F=t.tags.find((function(e){return e.key===je.H.AssetPartitionRangeEnd})),L=y.useState(!1),V=(0,o.Z)(L,2),U=V[0],M=V[1],G=y.useState(!1),J=(0,o.Z)(G,2),K=J[0],H=J[1],B=y.useMemo((function(){var e=[];if(_){var n,i=null!==(n=t.assetSelection)&&void 0!==n&&n.length?"/overview/backfills/".concat(_.value):(0,Ce.it)([{token:"tag",value:"".concat(je.H.Backfill,"=").concat(_.value)}]);e.push({key:_.key,value:_.value,link:i})}return P?e.push(P):z?e.push(z):void 0!==D&&void 0!==F&&e.push(D,F),e}),[null===(n=t.assetSelection)||void 0===n?void 0:n.length,_,P,F,D,z]);return(0,ne.jsxs)(Re,{highlighted:!!k,onMouseEnter:function(){H(!0)},onMouseLeave:function(){H(!1)},children:[i?(0,ne.jsx)("td",{children:c?(0,ne.jsx)(p.X,{checked:!!s,onChange:function(e){if(e.target instanceof HTMLInputElement){var n=e.target.checked,t=e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift");c&&c({checked:n,shiftKey:t})}}}):null}):null,(0,ne.jsx)("td",{children:(0,ne.jsx)(w.rU,{to:"/runs/".concat(t.id),children:(0,ne.jsx)(h.fv,{children:(0,ee.EI)(t)})})}),(0,ne.jsx)("td",{children:(0,ne.jsxs)(a.x,{flex:{direction:"column",gap:4},children:[(0,ne.jsx)(ee.Zr,{run:t}),S?(0,ne.jsx)("div",{children:(0,ne.jsx)(m.V,{icon:"cached",children:"Re-execution"})}):null]})}),(0,ne.jsxs)("td",{style:{position:"relative"},children:[(0,ne.jsxs)(a.x,{flex:{direction:"column",gap:5},children:[(0,Z.pv)(t.pipelineName)?(0,ne.jsx)(I.m,{assetKeys:(0,ee.Bo)(t)}):(0,ne.jsxs)(a.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,ne.jsx)(b.h,{isJob:A,showIcon:!0,pipelineName:t.pipelineName,pipelineHrefContext:"no-link"}),(0,ne.jsx)(w.rU,{to:O?(0,N.jT)({repoName:O.match.repository.name,repoLocation:O.match.repositoryLocation.name,pipelineName:t.pipelineName,isJob:A}):(0,N.r4)(t.pipelineName),target:"_blank",children:(0,ne.jsx)(u.JO,{name:"open_in_new",color:x.w.Blue500})})]}),(0,ne.jsxs)(a.x,{flex:{direction:"row",gap:8,wrap:"wrap"},children:[t.tags.length?(0,ne.jsx)(a.x,{children:(0,ne.jsx)(f.m,{fillColor:x.w.Gray100,label:(0,ne.jsxs)(g.Z,{onClick:function(){M(!0)},children:[t.tags.length," tag",1===t.tags.length?"":"s"]})})}):null,(0,ne.jsx)(Ne,{children:B.length?(0,ne.jsx)(ae.Q,{tags:B,mode:A?"default"!==t.mode?t.mode:null:t.mode,onAddTag:r}):null})]})]}),K&&t.tags.length?(0,ne.jsx)(C.b,{onShortcut:function(){M((function(e){return!e}))},shortcutLabel:"t",shortcutFilter:function(e){return"KeyT"===e.code},children:null},"runtabletags"):null]}),R?null:(0,ne.jsx)("td",{children:(0,ne.jsx)(ve,{run:t,onAddTag:r})}),(0,ne.jsx)("td",{children:(0,ne.jsx)(we.M9,{status:t.status,runId:t.id})}),(0,ne.jsx)("td",{children:(0,ne.jsx)(ee.Tw,{run:t})}),l,(0,ne.jsx)("td",{children:(0,ne.jsx)(de,{run:t,onAddTag:r,additionalActionsForRun:d})}),(0,ne.jsxs)(j.Vq,{isOpen:U,title:"Tags",canOutsideClickClose:!0,canEscapeKeyClose:!0,onClose:function(){M(!1)},children:[(0,ne.jsx)(j.a7,{children:(0,ne.jsx)(ae.Q,{tags:t.tags,mode:A?"default"!==t.mode?t.mode:null:t.mode,onAddTag:r})}),(0,ne.jsx)(j.cN,{topBorder:!0,children:(0,ne.jsx)(v.zx,{intent:"primary",onClick:function(){M(!1)},children:"Close"})})]})]})},Re=s.ZP.tr.withConfig({displayName:"RunTable__Row",componentId:"sc-18h8t3i-0"})(["",""],(function(e){return e.highlighted?"box-shadow: inset 3px 3px #bfccd6, inset -3px -3px #bfccd6;":null}));function Ee(e){var n=e.top,t=e.bottom;return(0,ne.jsxs)(a.x,{flex:{direction:"column"},padding:{vertical:12},children:[(0,ne.jsx)(a.x,{flex:{alignItems:"center",gap:12},padding:{left:24,right:24},children:n}),t?(0,ne.jsx)(a.x,{margin:{top:12},padding:{left:24,right:12,top:8},border:{side:"top",width:1,color:x.w.KeylineGray},flex:{gap:8},children:t}):null]})}var Ne=s.ZP.div.withConfig({displayName:"RunTable__RunTagsWrapper",componentId:"sc-18h8t3i-1"})(["display:contents;> *{display:contents;}"])},69654:function(e,n,t){t.d(n,{A:function(){return R}});var i=t(32723),r=t(34795),o=t(96234),s=t(56666),c=t(33028),a=t(15541),l=t(80018),u=t(4537),d=t(17914),p=t(47515),h=t(61623),m=t(32667),x=t(45519),f=t(83473),g=t(3077),j=t(78193),v=t(23555),y=t(49675),w=t(89622),C=t(35936),Z=function(e){if("TerminateRunSuccess"===(null===e||void 0===e?void 0:e.terminatePipelineExecution.__typename))throw new ErrorEvent("Not an error!");return null===e||void 0===e?void 0:e.terminatePipelineExecution},k=function(e){return{mustForce:!Object.keys(e).some((function(n){return e[n]})),frozenRuns:e,step:"initial",termination:{completed:0,errors:{}}}},b=function(e,n){switch(n.type){case"reset":return k(n.frozenRuns);case"toggle-force-terminate":return(0,c.Z)((0,c.Z)({},e),{},{mustForce:n.checked});case"start":return(0,c.Z)((0,c.Z)({},e),{},{step:"terminating"});case"termination-success":var t=e.termination;return(0,c.Z)((0,c.Z)({},e),{},{step:"terminating",termination:(0,c.Z)((0,c.Z)({},t),{},{completed:t.completed+1})});case"termination-error":var i=e.termination;return(0,c.Z)((0,c.Z)({},e),{},{step:"terminating",termination:(0,c.Z)((0,c.Z)({},i),{},{completed:i.completed+1,errors:(0,c.Z)((0,c.Z)({},i.errors),{},(0,s.Z)({},n.id,n.error))})});case"complete":return(0,c.Z)((0,c.Z)({},e),{},{step:"completed"})}},R=function(e){var n=e.isOpen,t=e.onClose,s=e.onComplete,c=e.selectedRuns,R=j.useRef(c),E=j.useReducer(b,R.current,k),N=(0,o.Z)(E,2),I=N[0],T=N[1],O=Object.keys(I.frozenRuns).length;j.useEffect((function(){n&&T({type:"reset",frozenRuns:R.current})}),[n]),j.useEffect((function(){n||(R.current=c)}),[n,c]);var A=(0,a.D)(w.zU),S=(0,o.Z)(A,1)[0],_=I.mustForce?v.vlg.MARK_AS_CANCELED_IMMEDIATELY:v.vlg.SAFE_TERMINATE,P=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){var n,t,r,o,c,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T({type:"start"}),n=Object.keys(I.frozenRuns),t=0,r=n;case 3:if(!(t<r.length)){e.next=13;break}return o=r[t],e.next=7,S({variables:{runId:o,terminatePolicy:_}});case 7:c=e.sent,"TerminateRunSuccess"===(null===(a=c.data)||void 0===a?void 0:a.terminatePipelineExecution.__typename)?T({type:"termination-success"}):T({type:"termination-error",id:o,error:Z(a)});case 10:t++,e.next=3;break;case 13:T({type:"complete"}),s(I.termination);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(e){T({type:"toggle-force-terminate",checked:e.target.checked})},D=Object.keys(I.frozenRuns).some((function(e){return I.frozenRuns[e]})),F="terminating"!==I.step;return(0,C.jsxs)(g.Vq,{isOpen:n,title:"Terminate runs",canEscapeKeyClose:F,canOutsideClickClose:F,onClose:t,children:[(0,C.jsx)(g.a7,{children:(0,C.jsxs)(u.Z,{direction:"column",spacing:24,children:[function(){switch(I.step){case"initial":return O?(0,C.jsxs)(u.Z,{direction:"column",spacing:16,children:[(0,C.jsx)("div",{children:"".concat(O," ").concat(1===O?"run":"runs"," will be terminated. Do you wish to continue?")}),(0,C.jsx)("div",{children:D?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.X,{checked:I.mustForce,size:"small",label:"Force termination immediately",onChange:z}),I.mustForce?(0,C.jsxs)(p.x,{flex:{display:"flex",direction:"row",gap:8},margin:{top:8},children:[(0,C.jsx)(h.JO,{name:"warning",color:m.w.Yellow500}),(0,C.jsxs)("div",{children:[(0,C.jsx)("strong",{children:"Warning:"})," computational resources created by runs may not be cleaned up."]})]}):null]}):(0,C.jsxs)(u.Z,{direction:"row",spacing:8,children:[(0,C.jsx)(h.JO,{name:"warning",color:m.w.Yellow500}),(0,C.jsxs)("div",{children:[(0,C.jsx)("strong",{children:"Warning:"})," computational resources created by runs may not be cleaned up."]})]})})]}):(0,C.jsxs)(u.Z,{direction:"column",spacing:16,children:[(0,C.jsx)("div",{children:"No runs selected for termination."}),(0,C.jsx)("div",{children:"The runs you selected may already have finished executing."})]});case"terminating":case"completed":var e=O>0?I.termination.completed/O:1;return(0,C.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,C.jsx)("div",{children:I.mustForce?"Forcing termination\u2026":"Terminating\u2026"}),(0,C.jsx)(l.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"terminating"===I.step?(0,C.jsx)(y.c,{message:"Termination in progress, please do not navigate away yet."}):null]});default:return null}}(),function(){if("initial"===I.step)return null;if("terminating"===I.step)return(0,C.jsx)("div",{children:"Please do not close the window or navigate away during termination."});var e=I.termination.errors,n=Object.keys(e).length,t=I.termination.completed-n;return(0,C.jsxs)(u.Z,{direction:"column",spacing:8,children:[t?(0,C.jsxs)(u.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,C.jsx)(h.JO,{name:"check_circle",color:m.w.Green500}),(0,C.jsx)("div",{children:I.mustForce?"Successfully forced termination for ".concat(t,"\n                ").concat(1===t?"run":"runs","."):"Successfully requested termination for ".concat(t,"\n              ").concat(1===t?"run":"runs",".")})]}):null,n?(0,C.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,C.jsxs)(u.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,C.jsx)(h.JO,{name:"warning",color:m.w.Yellow500}),(0,C.jsx)("div",{children:I.mustForce?"Could not force termination for ".concat(n," ").concat(1===n?"run":"runs",":"):"Could not request termination for ".concat(n," ").concat(1===n?"run":"runs",":")})]}),(0,C.jsx)("ul",{children:Object.keys(e).map((function(n){var t;return(0,C.jsx)("li",{children:(0,C.jsxs)(u.Z,{direction:"row",spacing:8,children:[(0,C.jsx)(f.fv,{children:n.slice(0,8)}),e[n]?(0,C.jsx)("div",{children:null===(t=e[n])||void 0===t?void 0:t.message}):null]})},n)}))})]}):null]})}()]})}),(0,C.jsx)(g.cN,{children:function(){switch(I.step){case"initial":return O?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(x.zx,{intent:"none",onClick:t,children:"Cancel"}),(0,C.jsx)(x.zx,{intent:"danger",onClick:P,children:"".concat(I.mustForce?"Force termination for":"Terminate"," ","".concat(O," ").concat(1===O?"run":"runs"))})]}):(0,C.jsx)(x.zx,{intent:"none",onClick:t,children:"OK"});case"terminating":return(0,C.jsx)(x.zx,{intent:"danger",disabled:!0,children:I.mustForce?"Forcing termination for ".concat("".concat(O," ").concat(1===O?"run":"runs","...")):"Terminating ".concat("".concat(O," ").concat(1===O?"run":"runs","..."))});case"completed":return(0,C.jsx)(x.zx,{intent:"primary",onClick:t,children:"Done"})}}()})]})}},37870:function(e,n,t){t.d(n,{J:function(){return a}});var i=t(4537),r=(t(78193),t(66708)),o=t(9610),s=t(80500),c=t(35936),a=function(e){var n,t,a=(0,s.n)(e);if(!e)return null;if(!e.pipelineSnapshotId)return{icon:"error",tooltip:'"'.concat(e.pipelineName,'" could not be found.'),disabled:!0};if(a){var l=a.type;if("origin-and-snapshot"===l)return null;if("origin-only"===l)return{icon:"warning",tooltip:'The loaded version of "'.concat(e.pipelineName,'" may be different than the one used for the original run.'),disabled:!1};if("snapshot-only"===l){var u=e.repositoryOrigin?(0,o.Uz)((0,r.kQ)(e.repositoryOrigin.repositoryName,e.repositoryOrigin.repositoryLocationName)):null;return{icon:"warning",tooltip:(0,c.jsxs)(i.Z,{direction:"column",spacing:4,children:[(0,c.jsx)("div",{children:'The original run loaded "'.concat(e.pipelineName,'" from ').concat(u||"a different code location",".")}),u?(0,c.jsxs)("div",{children:["Original definition in: ",(0,c.jsx)("strong",{children:u})]}):null]}),disabled:!1}}return{icon:"warning",tooltip:'The job "'.concat(e.pipelineName,'" may be a different version from the original pipeline run.'),disabled:!1}}var d=null===(n=e.repositoryOrigin)||void 0===n?void 0:n.repositoryName,p=null===(t=e.repositoryOrigin)||void 0===t?void 0:t.repositoryLocationName;return{icon:"error",tooltip:(0,c.jsxs)(i.Z,{direction:"column",spacing:8,children:[(0,c.jsx)("div",{children:'"'.concat(e.pipelineName,'" is not available in your definitions.')}),d&&p?(0,c.jsx)("div",{children:"Load definitions for ".concat((0,r.At)(d,p)," and try again.")}):null]}),disabled:!0}}},80500:function(e,n,t){t.d(n,{n:function(){return a},r:function(){return c}});var i=t(92761),r=t(26590),o=function(e,n){if(!n)return null;var t=n.pipelineName,i=n.repositoryOrigin;if(!i)return null;var o=null===i||void 0===i?void 0:i.repositoryLocationName,s=null===i||void 0===i?void 0:i.repositoryName,c=e.find((function(e){return e.repository.name===s&&e.repositoryLocation.name===o}));return c&&(0,r.h)(c,t)?c:null},s=function(e,n){if(!n)return null;var t=n.pipelineName,i=(0,r.k)(e,t);return i.length?i:null},c=function(e){var n=(0,i.vl)().options,t=o(n,e);if(t)return{match:t,type:"origin"};var r=s(n,e);return r&&r.length?{match:r[0],type:"pipeline-name-only"}:null},a=function(e){var n=(0,i.vl)().options,t=o(n,e),c=function(e,n){var t;if(!n)return null;var i=n.pipelineName,o=null!==(t=n.parentPipelineSnapshotId)&&void 0!==t?t:n.pipelineSnapshotId;if(i&&o){var s=(0,r.k)(e,i,o);if(s.length)return s}return null}(n,e),a=s(n,e);if(t){if(c){var l=c.find((function(e){return e.repository.name===t.repository.name&&e.repositoryLocation.name===t.repositoryLocation.name}));if(l)return{match:l,type:"origin-and-snapshot"}}return{match:t,type:"origin-only"}}return c&&c[0]?{match:c[0],type:"snapshot-only"}:a&&a[0]?{match:a[0],type:"pipeline-name-only"}:null}},20356:function(e,n,t){t.d(n,{m:function(){return c}});var i=t(60319),r=(t(78193),t(47515)),o=t(32667),s=t(35936),c=function(e){var n=e.title,t=e.tags,i=e.right,c=e.tabs;return(0,s.jsxs)(a,{background:o.w.Gray50,padding:{top:16,left:24,right:12},border:{side:"bottom",width:1,color:o.w.KeylineGray},children:[(0,s.jsxs)(r.x,{flex:{direction:"row",justifyContent:"space-between"},padding:{bottom:16},children:[(0,s.jsxs)(r.x,{flex:{direction:"row",alignItems:"flex-start",gap:12,wrap:"wrap"},children:[n,t]}),i]}),c]})},a=(0,i.ZP)(r.x).withConfig({displayName:"PageHeader__PageHeaderContainer",componentId:"sc-1u8zksn-0"})(["width:100%;.bp4-breadcrumbs{height:auto;}"])}}]);
//# sourceMappingURL=231.1e4ef75a.chunk.js.map