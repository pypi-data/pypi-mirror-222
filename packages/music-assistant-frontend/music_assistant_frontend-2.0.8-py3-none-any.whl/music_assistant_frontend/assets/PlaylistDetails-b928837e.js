import{_ as v,f as _}from"./ItemsListing.vue_vue_type_style_index_0_lang-1ef061d8.js";import{_ as y,a as k}from"./ProviderDetails.vue_vue_type_script_setup_true_lang-33f2e42a.js";import{l as b,r as p,w as h,o as w,L as s,ai as I,b as D,y as l,I as E,j as T,z as n,H as u,aj as B}from"./index-ebe4cd91.js";import"./ListviewItem-5151f17f.js";import"./MediaItemThumb.vue_vue_type_style_index_0_lang-bf2386aa.js";import"./ListItem-a20c73ec.js";import"./VImg-b5692565.js";import"./VMenu-86ca5efe.js";import"./index-bda4e7b4.js";import"./VListItem-0df8c60b.js";import"./VCheckboxBtn-fcc73f36.js";import"./VCard-46ebf6a3.js";/* empty css                             */import"./PanelviewItem.vue_vue_type_style_index_0_lang-516932fb.js";import"./contextmenu-b7cc1c45.js";import"./eventbus-d154090d.js";import"./Alert-d031836e.js";import"./Container-1375a850.js";/* empty css              */import"./VToolbar-76e5fae8.js";import"./VTextField-034239e4.js";import"./VBadge-0ad57746.js";import"./VRow-03e92c8f.js";import"./layout-84ae677b.js";import"./VDialog-ff35ac56.js";const Y=b({__name:"PlaylistDetails",props:{itemId:{},provider:{}},setup(c){const a=c,o=p(!1),e=p(),f=async function(){e.value=await s.getPlaylist(a.itemId,a.provider)};h(()=>a.itemId,t=>{t&&f()},{immediate:!0}),w(()=>{const t=s.subscribe(I.MEDIA_ITEM_ADDED,i=>{var m;const r=i.data;((m=e.value)==null?void 0:m.uri)==r.uri&&(o.value=!0)});D(t)});const d=async function(t){const i=[];return await s.getPlaylistTracks(a.itemId,a.provider,r=>{i.push(...r)},t.refresh),t.refresh&&await B(1e3),o.value=!1,_(i,t)};return(t,i)=>(l(),E("section",null,[T(y,{item:e.value},null,8,["item"]),e.value?(l(),n(v,{key:0,itemtype:"playlisttracks","parent-item":e.value,"show-provider":!1,"show-library":!1,"show-favorites-only-filter":!1,"show-track-number":!1,"load-data":d,"sort-keys":["position","position DESC","sort_name","sort_artist","sort_album"],"update-available":o.value,title:t.$t("playlist_tracks"),"allow-key-hooks":!0},null,8,["parent-item","update-available","title"])):u("",!0),e.value?(l(),n(k,{key:1,"item-details":e.value},null,8,["item-details"])):u("",!0)]))}});export{Y as default};
