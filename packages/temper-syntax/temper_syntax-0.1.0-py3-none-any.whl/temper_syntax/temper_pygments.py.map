{ "version": 3, "file": "OUTPUT_ROOT/temper-syntax/py/temper_syntax/temper_pygments.py", "sources": [ "-work/temper-syntax/temper-pygments.temper.md" ], "sourcesContent": [ "# Temper Pygments Lexer\n\n## Lexer class\n\nWe can't easily access backend classes, so we can't subclass\n`pygments.lexer.RegexLexer`, but we can define a separate class that can then\nbe subclassed in Python or elsewhere.\n\nTODO Maybe define an independent Lexer type and just create an instance here?\n\n    export class TemperLexer {\n\nThese indicators seems somewhat redundant to me, but they follow the examples in\nthe [Pygments documentation][pygments-lexer-docs].\n\n      public name: String = \u0022Temper\u0022;\n      public aliases: List\u003cString\u003e = [\u0022temper\u0022];\n      public filenames: List\u003cString\u003e = [\u0022*.temper\u0022];\n\n### Token rules\n\nMain thing, though, is the list of rules for definition tokens.\n\n      public tokens: Map\u003cString, List\u003cRuleOption\u003e\u003e = new Map([\n\n#### Root\n\n        new Pair(\u0022root\u0022, [\n          new Rule(raw\u0022\\s+\u0022, Whitespace),\n          new Rule(\u0022//.*?\u0024\u0022, CommentSingleline),\n\nMultiline comments in Temper don't nest at present, so this should be fine.\n\n          new Rule(raw\u0022(?s)/\\*.*\\*/\u0022, CommentMultiline),\n          new Rule(\n            words(\u0022false\u0022, \u0022NaN\u0022, \u0022null\u0022, \u0022true\u0022, \u0022void\u0022),\n            KeywordConstant,\n          ),\n          new Rule(\n            words(\n              \u0022class\u0022, \u0022interface\u0022, \u0022let\u0022, \u0022private\u0022, \u0022public\u0022, \u0022sealed\u0022, \u0022var\u0022,\n            ),\n            KeywordDeclaration,\n          ),\n          new Rule(\n            words(\n              \u0022do\u0022, \u0022else\u0022, \u0022export\u0022, \u0022extends\u0022, \u0022fn\u0022, \u0022if\u0022, \u0022import\u0022, \u0022is\u0022,\n              \u0022match\u0022, \u0022new\u0022, \u0022orelse\u0022,\n            ),\n            Keyword,\n          ),\n          new Rule(\n            words(\n              \u0022AnyValue\u0022, \u0022Boolean\u0022, \u0022Float64\u0022, \u0022Function\u0022, \u0022Int\u0022, \u0022List\u0022,\n              \u0022ListBuilder\u0022, \u0022Listed\u0022, \u0022Map\u0022, \u0022MapBuilder\u0022, \u0022MapKey\u0022, \u0022Mapped\u0022,\n              \u0022NoResult\u0022, \u0022Null\u0022, \u0022String\u0022, \u0022StringSlice\u0022, \u0022Void\u0022,\n            ),\n            NameBuiltin,\n          ),\n          new Rule(\u0022\\\u0022\u0022, StringKind, \u0022string\u0022),\n          new Rule(\u0022[-=+*\u0026|\u003c\u003e]+|/=?\u0022, Operator),\n          new Rule(\u0022[{}();:.,]\u0022, Punctuation),\n          new Rule(raw\u0022\\d+\\.?\\d*|\\.\\d+\u0022, Number),\n          new Rule(\u0022@\u0024{nameRegex}\u0022, NameDecorator),\n          new Rule(nameRegex, Name),\n        ].as\u003cList\u003cRuleOption\u003e\u003e()),\n\n#### Strings\n\n        new Pair(\u0022interpolation\u0022, [\n          new Rule(\u0022}\u0022, StringInterpol, \u0022#pop\u0022),\n          include(\u0022root\u0022),\n        ].as\u003cList\u003cRuleOption\u003e\u003e()),\n\nI'm not sure if order matters here. Seems simpler, but if I don't exclude `\u0024{`\nfrom core string chars, I don't get interp.\n\n        new Pair(\u0022string\u0022, [\n          new Rule(\u0022\\\u0022\u0022, StringKind, \u0022#pop\u0022),\n          new Rule(raw\u0022\\\u0024\\{\u0022, StringInterpol, \u0022interpolation\u0022),\n          new Rule(\u0022(?:[^\\\u0022\u0024]|\\\\\u0024[^{])+\u0022, StringKind),\n        ].as\u003cList\u003cRuleOption\u003e\u003e()),\n\n      ]);\n\n    }\n\n## Helper functions and values\n\nBe sloppy with names for now. TODO More complete Unicode support.\n\n    let nameRegex = \u0022[_\u003c\u003cLu\u003e\u003e\u003c\u003cLl\u003e\u003e][_\u003c\u003cLu\u003e\u003e\u003c\u003cLl\u003e\u003e0-9]*\u0022;\n\n    let words(...names: List\u003cString\u003e): String {\n      \u0022\\\\b(?:\u0024{names.join(\u0022|\u0022) { (x);; x }})\\\\b\u0022\n    }\n\n## Imports and links\n\n    let { ... } = import(\u0022./pygments\u0022);\n\n[issue1631]: https://github.com/temper-lang/temper/issues/1631\n[pygments-lexer-docs]: https://pygments.org/docs/lexerdevelopment/\n" ], "names": [ "TemperObject", "cast_by_type", "Pair", "Pair#255", "map_constructor", "map_constructor#256", "list_join", "list_join#257", "str_cat", "str_cat#258", "Tuple", "Any", "Callable", "tuple", "RuleOption", "Rule", "Include", "Whitespace", "Kind", "CommentSingleline", "CommentMultiline", "KeywordConstant", "KeywordDeclaration", "Keyword", "NameBuiltin", "StringKind", "Operator", "Punctuation", "Number", "NameDecorator", "Name", "StringInterpol", "include", "Inherit", "TokenKind", "ByGroups", "bygroups", "Using", "using", "inherit", "TemperLexer", "name", "aliases", "filenames", "tokens", "constructor", "this", "return", "t#190", "t#192", "t#193", "t#194", "t#195", "t#196", "t#197", "t#198", "t#199", "t#200", "t#201", "t#202", "t#203", "t#204", "t#205", "t#206", "t#207", "t#208", "t#209", "t#210", "t#211", "t#212", "t#213", "t#214", "t#215", "t#216", "t#127", "t#131", "t#136", "words", "names", "fn", "x", "t#220", "t#221", "nameRegex" ], "mappings": "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" }