import{b as j,r as V,c as O,U as a,F as i,N as e,q as B,P as D,O as N,S as L,_ as w,$ as S,u as s,a0 as W,M as v,s as P,W as $,J as I,X as z}from"./@vue-de7d3d24.js";import{u as M,c as R}from"./vuex-636235de.js";import{a as C}from"./axios-4a70c6fc.js";import{c as A,a as H}from"./vue-router-4cd13335.js";import"./bootstrap-85852bd1.js";/* empty css                        */import{u as E,s as q,T}from"./vue-toastification-6aa87443.js";import{s as Y,p as G,d as J,a as X}from"./@formkit-606708a1.js";import{V as Q}from"./vue-tippy-7086acf8.js";/* empty css                 */import{u as Z,a as x}from"./@vueuse-0fe84a4c.js";import"./@popperjs-8746c87e.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))m(d);new MutationObserver(d=>{for(const c of d)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&m(p)}).observe(document,{childList:!0,subtree:!0});function f(d){const c={};return d.integrity&&(c.integrity=d.integrity),d.referrerPolicy&&(c.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?c.credentials="include":d.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function m(d){if(d.ep)return;d.ep=!0;const c=f(d);fetch(d.href,c)}})();const tt={class:"container"},et={class:"row my-3"},st={class:"col-md-10 offset-md-1"},ot={class:"card text-center shadow my-3"},nt={class:"card-header"},at=e("i",{class:"bi-cash-coin"},null,-1),it={class:"card-body"},lt={class:"row justify-content-center mt-2"},ct={class:"row justify-content-center mt-2"},dt={class:"input-group"},rt={class:"input-group-prepend"},ut=["disabled","onUpdate:modelValue"],bt=["disabled","onUpdate:modelValue"],pt=e("div",{class:"input-group-append"},[e("span",{class:"input-group-text"}," €")],-1),_t={key:0,class:"input-group-append"},mt=["disabled","onUpdate:modelValue"],ht=e("option",{value:"checking"},"Girokonto",-1),gt=e("option",{value:"savings"},"Sparkonto",-1),ft=[ht,gt],vt={key:1,class:"input-group-append"},kt=["onClick"],$t=e("i",{class:"bi bi-arrow-up"},null,-1),yt=[$t],wt=["onClick"],Ct=e("i",{class:"bi bi-arrow-down"},null,-1),Vt=[Ct],Dt=["onClick"],St=e("i",{class:"bi bi-trash3"},null,-1),Bt=[St],Ut={key:0,class:"row justify-content-center mt-2"},Nt={__name:"Head",setup(_){const t=M(),f=E();t.commit("getBalances"),j(()=>{p(),setInterval(p,300*1e3)});function m(){window.open("https://github.com/rix1337/BudgeTeer/releases/latest","_blank")}const d=V(""),c=V(!1);function p(){C.get("api/version/").then(function(n){d.value=n.data.version.ver,console.info("%c BudgeTeer %c ".concat(d.value," "),"color: white; background: #303030; font-weight: 700; font-size: 24px; font-family: Monospace;","color: #303030; background: white; font-weight: 700; font-size: 24px; font-family: Monospace;"),console.info("%c ❤ Projekt unterstützen %c ".concat("https://github.com/sponsors/rix1337 ❤"," "),"color: white; background: #dc3545; font-weight: 700;","color: #dc3545; background: white; font-weight: 700;"),c.value=n.data.version.update_ready,t.commit("setDocker",n.data.version.docker),c.value&&(h("BudgeTeer - Update verfügbar! - "),console.log("Update steht bereit! Weitere Informationen unter https://github.com/rix1337/BudgeTeer/releases/latest"),f.info(`Update steht bereit! Weitere Informationen unter:
https://github.com/rix1337/BudgeTeer/releases/latest`,{timeout:15e3,onClick:m}))},function(){console.log("Konnte Version nicht abrufen!"),f.error("Konnte Version nicht abrufen!")})}function h(n){document.title=n,setTimeout(function(){h(n.substr(1)+n.substr(0,1))},200)}const u=O({get(){let n=0;for(let r=0;r<t.state.data.open_transactions.length;r++){let l=parseFloat(t.state.data.open_transactions[r].amount);isNaN(l)||(n+=l)}let g=0;for(let r=0;r<t.state.data.balances.length;r++){let l=parseFloat(t.state.data.balances[r].balance);!isNaN(l)&&t.state.data.balances[r].type==="checking"&&(g+=l)}let o=0;for(let r=0;r<t.state.data.budgets.length;r++)for(let l=0;l<t.state.data.budgets[r].entries.length;l++){let k=parseFloat(t.state.data.budgets[r].entries[l].amount);!isNaN(k)&&y(t.state.data.budgets[r].entries[l])&&(o+=k)}return(g+n+o).toFixed(2)}});function y(n){if(!n.booked){let g=new Date,o=new Date("1970-01-01"),r=new Date("2100-01-01");return n.valid_from_to[0]!==null&&(o=new Date(n.valid_from_to[0])),n.valid_from_to[1]!==null&&(r=new Date(n.valid_from_to[1])),g>=o&&g<=r}return!1}const b=V(new Date().toLocaleString("default",{month:"long"}));return(n,g)=>(a(),i("div",tt,[e("div",et,[e("div",st,[e("div",ot,[e("div",nt,[e("h1",null,[at,B(" Verfügbar im "+D(b.value)+": "+D(u.value)+" €",1)])]),e("div",it,[e("div",lt,[e("div",ct,[(a(!0),i(N,null,L(s(t).state.data.balances,(o,r)=>(a(),i("div",{key:o,class:"balance"},[e("div",dt,[e("div",rt,[w(e("input",{disabled:s(t).state.locked,"onUpdate:modelValue":l=>s(t).state.data.balances[r].label=l,class:"form-control"},null,8,ut),[[S,s(t).state.data.balances[r].label]])]),w(e("input",{disabled:s(t).state.locked,"onUpdate:modelValue":l=>s(t).state.data.balances[r].balance=l,type:"number",step:"0.01",class:"form-control"},null,8,bt),[[S,s(t).state.data.balances[r].balance]]),pt,s(t).state.locked?v("",!0):(a(),i("div",_t,[w(e("select",{disabled:s(t).state.locked,"onUpdate:modelValue":l=>s(t).state.data.balances[r].type=l,class:"form-control"},ft,8,mt),[[W,s(t).state.data.balances[r].type]])])),s(t).state.locked?v("",!0):(a(),i("div",vt,[e("button",{class:"btn btn-outline-primary",type:"button",onClick:l=>s(t).state.data.balances.splice(r-1,0,s(t).state.data.balances.splice(r,1)[0])},yt,8,kt),e("button",{class:"btn btn-outline-primary",type:"button",onClick:l=>s(t).state.data.balances.splice(r+1,0,s(t).state.data.balances.splice(r,1)[0])},Vt,8,wt),e("button",{class:"btn btn-outline-danger",type:"button",onClick:l=>s(t).state.data.balances.splice(r,1)},Bt,8,Dt)]))])]))),128)),s(t).state.locked?v("",!0):(a(),i("div",Ut,[e("button",{class:"btn btn-outline-primary",type:"button",onClick:g[0]||(g[0]=o=>s(t).state.data.balances.push({label:"",amount:""}))}," Konto hinzufügen ")]))])])])])])])]))}};const Mt={class:"text-center"},Tt={id:"offcanvasBottomSettings","aria-labelledby":"offcanvasBottomSettingsLabel",class:"offcanvas offcanvas-bottom",tabindex:"-1"},Kt=e("div",{class:"offcanvas-header"},[e("h3",{id:"offcanvasBottomSettingsLabel",class:"offcanvas-title"},[e("i",{class:"bi bi-gear"}),B(" Einstellungen")]),e("button",{"aria-label":"Close",class:"btn-close text-reset","data-bs-dismiss":"offcanvas",type:"button"})],-1),Lt={class:"offcanvas-body"},Et={key:0},Ft={key:1,id:"accordionSettings",class:"accordion"},Ot={key:0},Pt={key:0,class:"spinner-border spinner-border-sm",role:"status"},jt={key:1,class:"bi bi-save"},Wt={key:1,class:"btn btn-dark disabled"},It=e("span",{class:"spinner-border spinner-border-sm",role:"status"},null,-1),zt={__name:"Settings",setup(_){const t=M(),f=E();function m(){d.value=!0,C.post("api/settings/",t.state.settings).then(function(){console.log("Einstellungen gespeichert! Neustart des BudgeTeers wird dringend empfohlen!"),f.success("Einstellungen gespeichert! Neustart des BudgeTeers wird dringend empfohlen!"),t.commit("getSettings"),d.value=!1},function(){t.commit("getSettings"),d.value=!1,console.log("Konnte Einstellungen nicht speichern! Bitte die angegebenen Werte auf Richtigkeit prüfen."),f.error("Konnte Einstellungen nicht speichern! Bitte die angegebenen Werte auf Richtigkeit prüfen.")})}const d=V(!1),c=O(()=>t.state.settings.general.auth_hash.length>0);function p(){Y("settings")}return(h,u)=>{const y=P("FormKit");return a(),i("div",Mt,[e("div",Tt,[Kt,e("div",Lt,[s(t).state.misc.loaded_settings?v("",!0):(a(),i("h4",Et,"Einstellungen werden geladen...")),s(t).state.misc.loaded_settings?(a(),i("div",Ft,[$(y,{id:"settings",actions:!1,"incomplete-message":"Es müssen alle Felder korrekt ausgefüllt werden! Fehler sind rot markiert.","messages-class":"text-danger mt-4",type:"form",onSubmit:u[4]||(u[4]=b=>m())},{default:I(({value:b})=>[s(t).state.misc.docker?v("",!0):(a(),i("div",Ot,[$(y,{modelValue:s(t).state.settings.general.port,"onUpdate:modelValue":u[0]||(u[0]=n=>s(t).state.settings.general.port=n),help:"Hier den Port des Webservers wählen.","help-class":"text-muted","input-class":"form-control bg-light mb-2",label:"Port","messages-class":"text-danger","outer-class":"mb-4",placeholder:"Bspw. 9090",type:"number",validation:"required|between:1024,65535","validation-visibility":"live"},null,8,["modelValue"])])),$(y,{modelValue:s(t).state.settings.general.prefix,"onUpdate:modelValue":u[1]||(u[1]=n=>s(t).state.settings.general.prefix=n),help:"Hier den Prefix des Webservers wählen (nützlich für Reverse-Proxies).","help-class":"text-muted","input-class":"form-control bg-light mb-2",label:"Prefix","messages-class":"text-danger","outer-class":"mb-4",placeholder:"Bspw. budgeteer",type:"text",validation:"alpha","validation-visibility":"live"},null,8,["modelValue"]),$(y,{modelValue:s(t).state.settings.general.auth_user,"onUpdate:modelValue":u[2]||(u[2]=n=>s(t).state.settings.general.auth_user=n),validation:b.auth_hash?"required":"",help:"Hier den Nutzernamen für BudgeTeer eingeben.","help-class":"text-muted","input-class":"form-control bg-light mb-2",label:"Nutzername","messages-class":"text-danger",name:"auth_user","outer-class":"mb-4",placeholder:"Bspw. rix1337",type:"text"},null,8,["modelValue","validation"]),$(y,{modelValue:s(t).state.settings.general.auth_hash,"onUpdate:modelValue":u[3]||(u[3]=n=>s(t).state.settings.general.auth_hash=n),validation:c.value&&b.auth_user?"required|length:6":"",help:"Hier das Passwort für BudgeTeer angeben.","help-class":"text-muted","input-class":"form-control bg-light mb-2",label:"Passwort","messages-class":"text-danger",name:"auth_hash","outer-class":"mb-4",placeholder:"Bspw. ●●●●●●●●",type:"password","validation-visibility":"live"},null,8,["modelValue","validation"])]),_:1})])):v("",!0),e("div",null,[s(t).state.misc.loaded_settings?(a(),i("button",{key:0,class:"btn btn-primary mt-4",type:"submit",onClick:p},[d.value?(a(),i("span",Pt)):v("",!0),d.value?v("",!0):(a(),i("i",jt)),B(" Speichern ")])):(a(),i("button",Wt,[It,B(" Lädt... ")]))])])])])}}},Rt={class:"container"},At={class:"row my-3"},Ht={class:"col-md-10 offset-md-1"},qt={class:"card text-center shadow my-3"},Yt=e("div",{class:"card-header"},[e("h1",null,[e("i",{class:"bi bi-clock-history"}),B(" Offene Transaktionen ")])],-1),Gt={class:"card-body"},Jt={class:"row justify-content-center mt-2"},Xt={class:"input-group"},Qt={class:"input-group-prepend"},Zt=["disabled","onUpdate:modelValue"],xt=["disabled","onUpdate:modelValue"],te=e("div",{class:"input-group-append"},[e("span",{class:"input-group-text"}," €")],-1),ee={key:0,class:"input-group-append"},se=["onClick"],oe=e("i",{class:"bi bi-arrow-up"},null,-1),ne=[oe],ae=["onClick"],ie=e("i",{class:"bi bi-arrow-down"},null,-1),le=[ie],ce={class:"input-group-append"},de=["onClick"],re=e("i",{class:"bi bi-trash3"},null,-1),ue=[re],be={class:"row justify-content-center mt-2"},pe={__name:"Transactions",setup(_){const t=M();return t.commit("getOpenTransactions"),(f,m)=>(a(),i("div",Rt,[e("div",At,[e("div",Ht,[e("div",qt,[Yt,e("div",Gt,[e("div",Jt,[(a(!0),i(N,null,L(s(t).state.data.open_transactions,(d,c)=>(a(),i("div",{key:d,class:"transaction"},[e("div",Xt,[e("div",Qt,[w(e("input",{disabled:s(t).state.locked,"onUpdate:modelValue":p=>s(t).state.data.open_transactions[c].label=p,class:"form-control"},null,8,Zt),[[S,s(t).state.data.open_transactions[c].label]])]),w(e("input",{disabled:s(t).state.locked,"onUpdate:modelValue":p=>s(t).state.data.open_transactions[c].amount=p,type:"number",step:"0.01",class:"form-control"},null,8,xt),[[S,s(t).state.data.open_transactions[c].amount]]),te,s(t).state.locked?v("",!0):(a(),i("div",ee,[e("button",{class:"btn btn-outline-primary",type:"button",onClick:p=>s(t).state.data.open_transactions.splice(c-1,0,s(t).state.data.open_transactions.splice(c,1)[0])},ne,8,se),e("button",{class:"btn btn-outline-primary",type:"button",onClick:p=>s(t).state.data.open_transactions.splice(c+1,0,s(t).state.data.open_transactions.splice(c,1)[0])},le,8,ae)])),e("div",ce,[e("button",{class:"btn btn-outline-danger",type:"button",onClick:p=>s(t).state.data.open_transactions.splice(c,1)&&s(t).commit("setModifiedWhileLocked",!0)},ue,8,de)])])]))),128)),e("div",be,[s(t).state.locked?v("",!0):(a(),i("button",{key:0,class:"btn btn-outline-primary",type:"button",onClick:m[0]||(m[0]=d=>s(t).state.data.open_transactions.push({label:"",amount:""}))}," Transaktion hinzufügen "))])])])])])])]))}},_e={class:"col-md-auto p-1"},me=e("i",{class:"bi bi-arrow-left"},null,-1),he=[me],ge={key:0},fe={key:1},ve=e("i",{class:"bi bi-arrow-right"},null,-1),ke=[ve],F={__name:"DatePicker",props:{title:String,modelValue:String},emits:["update:modelValue"],setup(_,{emit:t}){const f=_,m=V(f.modelValue);function d(p){m.value===null&&(m.value=new Date().toLocaleDateString("en-CA",{year:"numeric",month:"2-digit"}));const h=new Date(m.value);h.setMonth(h.getMonth()+p),h.setDate(1);const u=h.toLocaleDateString("en-CA",{year:"numeric",month:"2-digit"});m.value=u,t("update:modelValue",u)}function c(){m.value=null,t("update:modelValue",null)}return(p,h)=>(a(),i("div",_e,[e("button",{class:"btn btn-outline-primary",type:"button",onClick:h[0]||(h[0]=u=>d(-1))},he),B(D(f.title)+" ",1),_.modelValue!==null?(a(),i("span",ge,D(_.modelValue),1)):(a(),i("span",fe,"∞ ")),e("button",{class:"btn btn-outline-primary",type:"button",onClick:h[1]||(h[1]=u=>d(1))},ke),e("button",{class:"btn btn-outline-secondary",onClick:c}," ∞ ")]))}},$e={class:"container"},ye={class:"row my-3"},we={class:"col-md-10 offset-md-1"},Ce={class:"card text-center shadow my-3"},Ve={class:"card-header"},De=e("i",{class:"bi bi-receipt-cutoff"},null,-1),Se=["disabled"],Be=e("i",{class:"bi bi-arrow-left"},null,-1),Ue=[Be],Ne=["disabled"],Me=e("i",{class:"bi bi-arrow-right"},null,-1),Te=[Me],Ke=e("div",{class:"col-md-auto p-1"},null,-1),Le={class:"card-body"},Ee={class:"row justify-content-center mt-2"},Fe={class:"accordion",id:"accordionBudgets"},Oe=["id"],Pe=["data-bs-target","aria-controls"],je=["data-bs-target","aria-controls"],We=["onUpdate:modelValue"],Ie=["onClick"],ze=e("i",{class:"bi bi-trash3"},null,-1),Re=[ze],Ae=["id","aria-labelledby"],He={class:"accordion-body"},qe={key:0,class:"input-group"},Ye={class:"input-group-prepend"},Ge=["disabled","onUpdate:modelValue"],Je=["disabled","onUpdate:modelValue"],Xe=e("div",{class:"input-group-append"},[e("span",{class:"input-group-text"}," €")],-1),Qe={key:0,class:"input-group-append"},Ze=["onClick"],xe=e("i",{class:"bi bi-x"},null,-1),ts=[xe],es=["onClick"],ss=e("i",{class:"bi bi-arrow-up"},null,-1),os=[ss],ns=["onClick"],as=e("i",{class:"bi bi-arrow-down"},null,-1),is=[as],ls=["onClick"],cs=e("i",{class:"bi bi-trash3"},null,-1),ds=[cs],rs={class:"input-group-append"},us=["onClick"],bs=e("i",{class:"bi bi-check"},null,-1),ps=[bs],_s=["onClick"],ms={class:"row justify-content-center mt-2"},hs={__name:"Budgets",setup(_){const t=M();t.commit("getBudgets");function f(b){return parseFloat(b).toFixed(2)}function m(b){let n=0;for(let g=0;g<t.state.data.budgets[b].entries.length;g++)if(u(t.state.data.budgets[b].entries[g])){let o=parseFloat(t.state.data.budgets[b].entries[g].amount);isNaN(o)||(n+=o)}return f(n)}function d(){let b=new Date(c.value),n=new Date;return b.getMonth()===n.getMonth()&&b.getFullYear()===n.getFullYear()}const c=V(new Date().toISOString().slice(0,7)),p=V(0);function h(b){p.value+=b;let n=new Date().setMonth(new Date().getMonth()+p.value);c.value=new Date(n).toISOString().slice(0,7)}function u(b){return t.state.locked&&d()?!b.booked&&y(b):b}function y(b){let n=new Date(c.value),g=new Date("1970-01-01"),o=new Date("2100-01-01");return b.valid_from_to[0]!==null&&(g=new Date(b.valid_from_to[0])),b.valid_from_to[1]!==null&&(o=new Date(b.valid_from_to[1])),n>=g&&n<=o}return(b,n)=>(a(),i("div",$e,[e("div",ye,[e("div",we,[e("div",Ce,[e("div",Ve,[e("h1",null,[De,B(" Budgets "+D(c.value)+" ",1),e("button",{disabled:p.value<=0,class:"btn btn-outline-primary m-1",type:"button",onClick:n[0]||(n[0]=g=>h(-1))},Ue,8,Se),e("button",{disabled:p.value>=13,class:"btn btn-outline-primary",type:"button",onClick:n[1]||(n[1]=g=>h(1))},Te,8,Ne)]),Ke]),e("div",Le,[e("div",Ee,[e("div",Fe,[(a(!0),i(N,null,L(s(t).state.data.budgets,(g,o)=>(a(),i("div",{key:g,class:"accordion-item"},[e("h2",{class:"accordion-header",id:"heading"+o},[s(t).state.locked?(a(),i("button",{key:0,class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapse"+o,"aria-expanded":"false","aria-controls":"collapse"+o},D(s(t).state.data.budgets[o].category)+": "+D(m(o))+" € ",9,Pe)):(a(),i("button",{key:1,class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapse"+o,"aria-expanded":"false","aria-controls":"collapse"+o},[w(e("input",{type:"text",class:"form-control",placeholder:"Kategorie","onUpdate:modelValue":r=>s(t).state.data.budgets[o].category=r},null,8,We),[[S,s(t).state.data.budgets[o].category]]),e("button",{class:"btn btn-outline-danger",type:"button",onClick:r=>s(t).state.data.budgets.splice(o,1)&&s(t).commit("setModifiedWhileLocked",!0)},Re,8,Ie)],8,je))],8,Oe),e("div",{id:"collapse"+o,class:"accordion-collapse collapse","aria-labelledby":"heading"+o,"data-bs-parent":"#accordionBudgets"},[e("div",He,[(a(!0),i(N,null,L(s(t).state.data.budgets[o].entries,(r,l)=>(a(),i("div",{key:r},[u(s(t).state.data.budgets[o].entries[l])?(a(),i("div",qe,[e("div",Ye,[w(e("input",{disabled:s(t).state.locked,"onUpdate:modelValue":k=>s(t).state.data.budgets[o].entries[l].label=k,class:"form-control"},null,8,Ge),[[S,s(t).state.data.budgets[o].entries[l].label]])]),w(e("input",{disabled:s(t).state.locked,"onUpdate:modelValue":k=>s(t).state.data.budgets[o].entries[l].amount=k,type:"number",step:"0.01",class:"form-control"},null,8,Je),[[S,s(t).state.data.budgets[o].entries[l].amount]]),Xe,s(t).state.locked?v("",!0):(a(),i("div",Qe,[d()&&s(t).state.data.budgets[o].entries[l].booked?(a(),i("button",{key:0,class:"btn btn-outline-danger",type:"button",onClick:k=>s(t).state.data.budgets[o].entries[l].booked=!1},ts,8,Ze)):v("",!0),e("button",{class:"btn btn-outline-primary",type:"button",onClick:k=>s(t).state.data.budgets[o].entries.splice(l-1,0,s(t).state.data.budgets[o].entries.splice(l,1)[o])},os,8,es),e("button",{class:"btn btn-outline-primary",type:"button",onClick:k=>s(t).state.data.budgets[o].entries.splice(l+1,0,s(t).state.data.budgets[o].entries.splice(l,1)[o])},is,8,ns),e("button",{class:"btn btn-outline-danger",type:"button",onClick:k=>s(t).state.data.budgets[o].entries.splice(l,1)},ds,8,ls),$(F,{title:"von",modelValue:s(t).state.data.budgets[o].entries[l].valid_from_to[0],"onUpdate:modelValue":k=>s(t).state.data.budgets[o].entries[l].valid_from_to[0]=k},null,8,["modelValue","onUpdate:modelValue"]),$(F,{title:"bis",modelValue:s(t).state.data.budgets[o].entries[l].valid_from_to[1],"onUpdate:modelValue":k=>s(t).state.data.budgets[o].entries[l].valid_from_to[1]=k},null,8,["modelValue","onUpdate:modelValue"])])),e("div",rs,[d()&&s(t).state.locked&&!s(t).state.data.budgets[o].entries[l].booked?(a(),i("button",{key:0,class:"btn btn-outline-success",type:"button",onClick:k=>{s(t).commit("setModifiedWhileLocked",!0),s(t).state.data.budgets[o].entries[l].booked=!0}},ps,8,us)):v("",!0)])])):v("",!0)]))),128)),s(t).state.locked?v("",!0):(a(),i("button",{key:0,class:"btn btn-outline-primary",type:"button",onClick:r=>s(t).state.data.budgets[o].entries.push({label:"",amount:"",valid_from_to:[null,null],booked:!1})}," Eintrag hinzufügen ",8,_s))])],8,Ae)]))),128))]),e("div",ms,[s(t).state.locked?v("",!0):(a(),i("button",{key:0,class:"btn btn-outline-primary",type:"button",onClick:n[2]||(n[2]=g=>s(t).state.data.budgets.push({category:"Kategorie",amount:"",entries:[]}))}," Kategorie hinzufügen "))])])])])])])]))}},gs={__name:"_Main",setup(_){return(t,f)=>(a(),i("main",null,[$(Nt),$(pe),$(hs),$(zt)]))}},fs=A({history:H(),routes:[{path:"/:pathMatch(.*)*",component:gs}]});const vs={class:"sticky-bottom float-end"},ks={class:"col-md-auto p-1"},$s=e("i",{class:"bi bi-save"},null,-1),ys=[$s],ws=e("i",{class:"bi bi-unlock"},null,-1),Cs=[ws],Vs=e("i",{class:"bi bi-lock"},null,-1),Ds=[Vs],Ss={key:0,class:"bi bi-sun"},Bs={key:1,class:"bi bi-moon-stars"},Us=e("i",{class:"bi bi-gear"},null,-1),Ns=[Us],Ms={__name:"App",setup(_){const t=Z(),f=x(t),m=M(),d=E();function c(h){C.post("api/json/"+h+"/",m.state.data[h]).then(function(){console.log(h+" gespeichert.")},function(){console.log("Konnte "+h+" nicht speichern!"),d.error("Konnte "+h+" nicht speichern!")})}function p(){c("balances"),c("budgets"),c("open_transactions"),m.commit("setLocked",!0),m.commit("setModifiedWhileLocked",!1)}return(h,u)=>{const y=P("router-view");return a(),i(N,null,[$(y),e("div",vs,[e("div",ks,[s(m).state.modified_while_locked?(a(),i("button",{key:0,class:"btn btn-outline-warning bg-dark m-1",type:"button",onClick:u[0]||(u[0]=b=>p())},ys)):s(m).state.locked?(a(),i("button",{key:1,class:"btn btn-outline-success bg-dark m-1",type:"button",onClick:u[1]||(u[1]=b=>s(m).commit("setLocked",!1))},Cs)):(a(),i("button",{key:2,class:"btn btn-outline-danger bg-dark m-1",type:"button",onClick:u[2]||(u[2]=b=>p())},Ds)),e("button",{type:"button",class:"btn btn-outline-secondary bg-dark text-warning m-1",onClick:u[3]||(u[3]=b=>s(f)())},[s(t)?(a(),i("i",Ss)):(a(),i("i",Bs))]),e("button",{"aria-controls":"offcanvasBottomSettings",class:"btn btn-outline-primary bg-dark m-1","data-bs-target":"#offcanvasBottomSettings","data-bs-toggle":"offcanvas",type:"button",onClick:u[4]||(u[4]=b=>s(m).commit("getSettings"))},Ns)])])],64)}}},K=E(),Ts=R({state(){return{data:{balances:[],open_transactions:[],budgets:[]},locked:!0,modified_while_locked:!1,settings:{},misc:{loaded_settings:!1,docker:!1}}},mutations:{getSettings(_){C.get("api/settings/").then(function(t){_.settings=t.data.settings,_.misc.loaded_settings=!0},function(){console.log("Konnte Einstellungen nicht abrufen!"),K.error("Konnte Einstellungen nicht abrufen!")})},getBalances(_){C.get("api/json/balances/").then(function(t){_.data.balances=t.data.balances},function(){console.log("Konnte Kontostände nicht abrufen!"),K.error("Konnte Kontostände nicht abrufen!")})},getOpenTransactions(_){C.get("api/json/open_transactions/").then(function(t){_.data.open_transactions=t.data.open_transactions},function(){console.log("Konnte offene Transaktionen nicht abrufen!"),K.error("Konnte offene Transaktionen nicht abrufen!")})},getBudgets(_){C.get("api/json/budgets/").then(function(t){_.data.budgets=t.data.budgets},function(){console.log("Konnte Budgets nicht abrufen!"),K.error("Konnte Budgets nicht abrufen!")})},setDocker(_,t){_.misc.docker=t},setLocked(_,t){_.locked=t},setModifiedWhileLocked(_,t){_.modified_while_locked=t}}}),U=z(Ms);U.use(Ts);U.use(fs);U.use(q,{position:"top-center",draggable:!1,maxToasts:1,bodyClassName:["toast-body"],toastDefaults:{[T.ERROR]:{icon:"bi bi-exclamation-triangle"},[T.WARNING]:{icon:"bi bi-exclamation-circle"},[T.INFO]:{icon:"bi bi-info-circle"},[T.SUCCESS]:{icon:"bi bi-check-circle-fill",timeout:3e3}}});U.use(Q);U.use(G,J({locales:{de:X},locale:"de"}));U.mount("#app");
